<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>User Reference:ExpressionFilter - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul><li class="toc1"><a href="User_Reference%253AOperator_Module.html">Operator Module</a></li><li class="toc1"><a href="User_Reference%253AOperator_Module_Scripting.html">Operator Scripting</a></li><li class="toc1"><a href="User_Reference%253AModule_Command_Line_Options.html">Module Command Line Options</a></li><li class="toc1"><a href="User_Reference%253AData_File_Formats.html">Data File Formats</a></li><li class="toc1"><a href="User_Reference%253AFilters.html">Configuration Guide</a></li><li class="toc1"><a href="User_FAQ.html">FAQ</a></li><li class="toc1">Applications</li><ul><li class="toc2"><a href="User_Reference%253ACursorTask.html">Cursor Task</a></li><li class="toc2"><a href="https://www.bci2000.org/mediawiki/index.php/User_Reference:P3SpellerTask">P3Speller Task</a></li><li class="toc2"><a href="https://www.bci2000.org/mediawiki/index.php/User_Reference:StimulusPresentation">Stimulus Presentation</a></li></ul><li class="toc1">Tools</li><ul><li class="toc2"><a href="User_Reference%253ABCI2000Certification.html">BCI2000Certification</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Launcher.html">BCI2000Launcher</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Viewer.html">BCI2000Viewer</a></li><li class="toc2"><a href="User_Reference%253ABCI2000FileInfo.html">BCI2000FileInfo</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Export.html">BCI2000Export</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Analysis.html">BCI2000Analysis</a></li><li class="toc2"><a href="User_Reference%253ABCI2000_Offline_Analysis.html">BCI2000 Offline Analysis</a></li><li class="toc2"><a href="User_Reference%253AEloc_Helper.html">Eloc Helper</a></li><li class="toc2"><a href="User_Reference%253AEEGLabImport.html">EEGLabImport</a></li><li class="toc2"><a href="User_Reference%253AMatlab_Tools.html">Matlab Tools</a></li><li class="toc2"><a href="User_Reference%253AMatlab_MEX_Files.html">Matlab MEX Files</a></li><li class="toc2"><a href="User_Reference%253ACommand_Line_Processing.html">Command Line Processing</a></li></ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">ExpressionFilter</h1>
 <p class = "subtitle">User Reference</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="User_Reference%253AExpressionFilter.html#Function"><span class="tocnumber">1</span> <span class="toctext">Function</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="User_Reference%253AExpressionFilter.html#Parameters"><span class="tocnumber">2</span> <span class="toctext">Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="User_Reference%253AExpressionFilter.html#Expressions"><span class="tocnumber">2.1</span> <span class="toctext">Expressions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="User_Reference%253AExpressionFilter.html#States"><span class="tocnumber">3</span> <span class="toctext">States</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="User_Reference%253AExpressionFilter.html#Examples"><span class="tocnumber">4</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="User_Reference%253AExpressionFilter.html#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Function">Function</span></h2>
<p>The ExpressionFilter uses <a href="User_Reference%253AExpression_Syntax.html" title="User Reference:Expression Syntax">Arithmetic Expressions</a> to determine its output.
As arithmetic expressions may contain <a href="BCI2000_Glossary.html#State" title="BCI2000 Glossary">state variables</a> and the filter's input signal, this provides a way to
</p>
<ul><li>modify data processing according to BCI2000 system state,</li>
<li>to introduce state variable information into additional signal channels,</li>
<li>to replace processing results with system state information.</li></ul>
<h2><span class="mw-headline" id="Parameters">Parameters</span></h2>
<h3><span class="mw-headline" id="Expressions">Expressions</span></h3>
<p>A matrix of strings which represent <a href="User_Reference%253AExpression_Syntax.html" title="User Reference:Expression Syntax">arithmetic expressions</a>. These expressions determine the filter's output signal.
</p><p>Output signal dimensions are derived from matrix dimensions:
</p>
<ul><li>matrix rows correspond to signal channels, and</li>
<li>matrix columns correspond to signal elements (samples).</li></ul>
<p>For each signal block, each of the expressions is evaluated, and the result is entered into the corresponding element in the output signal.
Expressions may contain references to the filter's input signal, and to state variables (see examples).
</p><p>When the Expressions parameter is an empty matrix (a matrix with a row count of zero), the ExpressionFilter will copy its input into its output unchanged.
</p>
<h2><span class="mw-headline" id="States">States</span></h2>
<p>Any available state may enter into one of the expressions.
</p>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<p>The following 2-by-2 matrix will replace a 2-by-2 input signal with its square. Additionally, when the <i>ResultCode</i> state variable is nonzero, the output will be zero.
</p>
<pre>Signal(1,1)^2*(ResultCode==0)   Signal(1,2)^2*(ResultCode==0)
Signal(2,1)^2*(ResultCode==0)   Signal(2,2)^2*(ResultCode==0)
</pre>
<hr />
<p>When the <a href="User_Reference%253AJoystickFilter.html" title="User Reference:JoystickFilter">JoystickFilter</a> is used to track a joystick position, the <i>JoystickXpos</i> and <i>JoystickYpos</i> state variables represent joystick position.
When the ExpressionFilter is present in the signal processing module, placed between <a href="User_Reference%253ALinearClassifier.html" title="User Reference:LinearClassifier">LinearClassifier</a> and <a href="User_Reference%253ANormalizer.html" title="User Reference:Normalizer">Normalizer</a>, it may be configured to control the cursor directly by joystick position, using this 2-by-1 matrix:
</p>
<pre>JoystickXpos
JoystickYpos
</pre>
<p>In the same configuration, to re-enable cursor movement by the output of signal processing without removing the ExpressionFilter from the signal processing module, either set the Expressions parameter to an empty matrix, or use this matrix:
</p>
<pre>Signal(1,1)
Signal(2,1)
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="User_Reference%253AExpression_Syntax.html" title="User Reference:Expression Syntax">User Reference:Expression Syntax</a>
</p>
<!-- 
NewPP limit report
Cached time: 20230524001323
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.010 seconds
Real time usage: 0.013 seconds
Preprocessor visited node count: 23/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:1572-0!canonical and timestamp 20230524001323 and revision id 5543
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=User_Reference:ExpressionFilter&amp;oldid=5543">http://www.bci2000.org/mediawiki/index.php?title=User_Reference:ExpressionFilter&amp;oldid=5543</a>"</div>
 </div>
</body>
</html>