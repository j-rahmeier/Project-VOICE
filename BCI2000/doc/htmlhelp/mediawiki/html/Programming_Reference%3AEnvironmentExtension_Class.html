<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Programming Reference:EnvironmentExtension Class - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul><li class="toc1">Concepts</li><ul><li class="toc2"><a href="Programming_Reference%253AFilter_Chain.html">Filter Chain</a></li><li class="toc2"><a href="Programming_Reference%253ASignals.html">Signals</a></li><li class="toc2"><a href="Programming_Reference%253AError_Handling.html">Error Handling</a></li><li class="toc2"><a href="Programming_Reference%253ALocalization.html">Localization</a></li><li class="toc2"><a href="Programming_Reference%253ARapid_Development.html">Rapid Development</a></li></ul><li class="toc1">Reference</li><ul><li class="toc2"><a href="Programming_Reference%253AGenericFilter_Class.html">GenericFilter</a></li><li class="toc2"><a href="Programming_Reference%253AEnvironment_Class.html">Environment</a></li><li class="toc2"><a href="Programming_Reference%253AGenericVisualization_Class.html">GenericVisualization</a></li><li class="toc2"><a href="Programming_Reference%253AErrors_and_Warnings.html">Errors and Warnings</a></li><li class="toc2"><a href="Programming_Reference%253ADebug_Output.html">Debug Output</a></li></ul><li class="toc1">Data Acquisition</li><ul><li class="toc2"><a href="Programming_Reference%253AGenericADC_Class.html">GenericADC</a></li></ul><li class="toc1">Data Storage</li><ul><li class="toc2"><a href="Programming_Reference%253AGenericFileWriter_Class.html">GenericFileWriter</a></li><li class="toc2"><a href="Programming_Reference%253ABCI2000FileReader_Class.html">BCI2000FileReader</a></li></ul><li class="toc1">Signal Processing</li><ul><li class="toc2"><a href="Programming_Reference%253AIIRFilterBase_Class.html">IIR Filters</a></li></ul><li class="toc1">Application Modules</li><ul><li class="toc2"><a href="Programming_Reference%253AApplicationBase_Class.html">ApplicationBase</a></li><li class="toc2"><a href="Programming_Reference%253AFeedbackTask_Class.html">FeedbackTask</a></li><li class="toc2"><a href="Programming_Reference%253AStimulusTask_Class.html">StimulusTask</a></li><li class="toc2"><a href="Programming_Reference%253A3D_API.html">3D API</a></li></ul><li class="toc1">Howtos</li><ul><li class="toc2"><a href="Programming_Howto%253ABuilding_BCI2000.html">Building BCI2000</a></li><li class="toc2"><a href="Programming_Howto%253ASVN_Client_Setup.html">SVN Client Setup</a></li><li class="toc2"><a href="Programming_Howto%253AUsing_TortoiseSVN.html">Using TortoiseSVN</a></li></ul><li class="toc1"><a href="Programming_FAQ.html">FAQ</a></li><li class="toc1">Tutorials</li><ul><li class="toc2"><a href="Programming_Tutorial%253AImplementing_a_Data_Acquisition_Module.html">Data Acquisition</a></li><li class="toc2"><a href="Programming_Tutorial%253AImplementing_a_Signal_Processing_Filter.html">Signal Processing</a></li><li class="toc2"><a href="Programming_Tutorial%253AImplementing_a_Matlab-based_Filter.html">Matlab Signal Processing</a></li></ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">EnvironmentExtension Class</h1>
 <p class = "subtitle">Programming Reference</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Location"><span class="tocnumber">1</span> <span class="toctext">Location</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Synopsis"><span class="tocnumber">2</span> <span class="toctext">Synopsis</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Events"><span class="tocnumber">3</span> <span class="toctext">Events</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Publish"><span class="tocnumber">3.1</span> <span class="toctext">Publish</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Preflight"><span class="tocnumber">3.2</span> <span class="toctext">Preflight</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Initialize"><span class="tocnumber">3.3</span> <span class="toctext">Initialize</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#PostInitialize"><span class="tocnumber">3.4</span> <span class="toctext">PostInitialize</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#StartRun"><span class="tocnumber">3.5</span> <span class="toctext">StartRun</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#PostStartRun"><span class="tocnumber">3.6</span> <span class="toctext">PostStartRun</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#StopRun"><span class="tocnumber">3.7</span> <span class="toctext">StopRun</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#PostStopRun"><span class="tocnumber">3.8</span> <span class="toctext">PostStopRun</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Process"><span class="tocnumber">3.9</span> <span class="toctext">Process</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#PostProcess"><span class="tocnumber">3.10</span> <span class="toctext">PostProcess</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Resting"><span class="tocnumber">3.11</span> <span class="toctext">Resting</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Methods"><span class="tocnumber">4</span> <span class="toctext">Methods</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#ParamRef_Parameter.28string_Name.29"><span class="tocnumber">4.1</span> <span class="toctext">ParamRef Parameter(string Name)</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#ParamRef_OptionalParameter.28string_Name.2C_value_Default.29"><span class="tocnumber">4.2</span> <span class="toctext">ParamRef OptionalParameter(string Name, value Default)</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#StateRef_State.28string_Name.29"><span class="tocnumber">4.3</span> <span class="toctext">StateRef State(string Name)</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#StateRef_OptionalState.28string_Name.29"><span class="tocnumber">4.4</span> <span class="toctext">StateRef OptionalState(string Name)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#Instantiation"><span class="tocnumber">5</span> <span class="toctext">Instantiation</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="Programming_Reference%253AEnvironmentExtension_Class.html#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Location">Location</span></h2>
<p><tt>BCI200/src/shared/accessors</tt>
</p>
<h2><span class="mw-headline" id="Synopsis">Synopsis</span></h2>
<p>The EnvironmentExtension class defines an interface for BCI2000 components (<i>"extensions"</i>) that are not <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">filters</a>. Such extensions do not process signals but still have access to <a href="BCI2000_Glossary.html#Parameter" title="BCI2000 Glossary">BCI2000 parameters</a> and <a href="BCI2000_Glossary.html#State" title="BCI2000 Glossary">state variables</a>, and are notified of system events such as <i>Preflight</i>, <i>Initialize</i>, and <i>StartRun</i>.
</p><p>Components that don't need to handle system events may inherit from the <a href="Programming_Reference%253AEnvironment_Class.html" title="Programming Reference:Environment Class">Environment class</a> directly rather than indirectly via EnvironmentExtension.
</p>
<h2><span class="mw-headline" id="Events">Events</span></h2>
<h3><span class="mw-headline" id="Publish">Publish</span></h3>
<p>This event handler is called during the BCI2000 <a href="Technical_Reference%253AStates_of_Operation.html#Publishing_Phase" title="Technical Reference:States of Operation">publishing phase</a>. Its purpose is to request parameters and states from the system.
To simplify requesting parameters and states, and to provide markers that allow to find and extract parameter and states requests, a number of BEGIN/END macros is defined that allow writing
</p>
<pre>BEGIN_PARAMETER_DEFINITIONS
 "section int param1= 0&#160;%&#160;%&#160;% // comment",
 ... // any number of parameter definition lines may follow here
END_PARAMETER_DEFINITIONS

BEGIN_STATE_DEFINITIONS
 "MyState 1 0",
... // any number of state definition lines may follow here
END_STATE_DEFINITIONS

BEGIN_EVENT_DEFINITIONS
 "MyEvent 16 0",
... // any number of event definition lines may follow here
END_EVENT_DEFINITIONS
</pre>
<p>There, BEGIN/END macros enclose lists of comma-separated C strings representing <a href="Technical_Reference%253AParameter_Definition.html" title="Technical Reference:Parameter Definition">parameter</a> or <a href="Technical_Reference%253AState_Definition.html" title="Technical Reference:State Definition">state definition lines</a>, respectively.
</p>
<h3><span class="mw-headline" id="Preflight">Preflight</span></h3>
<p>Called during the <a href="Technical_Reference%253AStates_of_Operation.html#Initialization_Phase" title="Technical Reference:States of Operation">system initialization phase</a>. In this event handler, the extension component is supposed to test parameter values for consistency, and to report errors by writing into the <tt>bcierr</tt> stream. When no error is reported, it is assumed that the component's operation is safe.
</p>
<h3><span class="mw-headline" id="Initialize">Initialize</span></h3>
<p>Called during the <a href="Technical_Reference%253AStates_of_Operation.html#Initialization_Phase" title="Technical Reference:States of Operation">system initialization phase</a>. In the <tt>Initialize()</tt> event handler, a component should initialize itself from parameter values. Ideally, the component's state should not depend on the component's past history prior to the last call to <tt>Initialize()</tt>.
</p>
<h3><span class="mw-headline" id="PostInitialize">PostInitialize</span></h3>
<p>Called after the <a href="Technical_Reference%253AStates_of_Operation.html#Initialization_Phase" title="Technical Reference:States of Operation">system initialization phase</a> has been completed for all <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> components.
</p>
<h3><span class="mw-headline" id="StartRun">StartRun</span></h3>
<p>Called when a new <a href="BCI2000_Glossary.html#Run" title="BCI2000 Glossary">run</a> begins. Extension components' <i>StartRun</i> handler is called prior to calling <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> component's <i>StartRun</i> handlers.
</p>
<h3><span class="mw-headline" id="PostStartRun">PostStartRun</span></h3>
<p>Called after <i>StartRun</i> has been called for all <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> components.
</p>
<h3><span class="mw-headline" id="StopRun">StopRun</span></h3>
<p>Called at the end of a <a href="BCI2000_Glossary.html#Run" title="BCI2000 Glossary">run</a>, before <i>StopRun</i> is called for any <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> component.
</p>
<h3><span class="mw-headline" id="PostStopRun">PostStopRun</span></h3>
<p>Called after <i>StopRun</i> has been called for all <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> components.
</p>
<h3><span class="mw-headline" id="Process">Process</span></h3>
<p>Called while the system is running, once for each data block, prior to <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> components.
</p>
<h3><span class="mw-headline" id="PostProcess">PostProcess</span></h3>
<p>Called while the system is running, once for each data block, after all <a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">GenericFilter</a> components have completed processing.
</p>
<h3><span class="mw-headline" id="Resting">Resting</span></h3>
<p>Called while the system is suspended. Typically, <tt>Resting</tt> is called repeatedly inside source modules; in the remaining modules, <tt>Resting</tt> is called once when the system enters suspended state. Except that it is called at least once in suspended state, you should not make any assumption how often <tt>Resting</tt> is called.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Methods">Methods</span></h2>
<h3><span id="ParamRef_Parameter(string_Name)"></span><span class="mw-headline" id="ParamRef_Parameter.28string_Name.29">ParamRef Parameter(string Name)</span></h3>
<p>The <tt>Parameter()</tt> method returns a reference to a parameter that may be used for reading and writing parameters. When there is no parameter with the specified name available in the system, or when it has not been accessed from the component's <tt>Preflight()</tt> handler, an error message is displayed.
For details, see <a href="Programming_Reference%253AError_Handling.html#Accessing_Environment_Objects" title="Programming Reference:Error Handling">Accessing Environment Objects</a>.
</p>
<h3><span id="ParamRef_OptionalParameter(string_Name,_value_Default)"></span><span class="mw-headline" id="ParamRef_OptionalParameter.28string_Name.2C_value_Default.29">ParamRef OptionalParameter(string Name, value Default)</span></h3>
<p>The <tt>OptionalParameter()</tt> method is identical to the <tt>Parameter()</tt> method except that it does not generate an error message for an unavailable parameter; rather, a reference to a temporary parameter object is returned, initialized to a default value. The default value may be specified as a number or a string, and itself defaults to "0".
</p>
<h3><span id="StateRef_State(string_Name)"></span><span class="mw-headline" id="StateRef_State.28string_Name.29">StateRef State(string Name)</span></h3>
<p>The <tt>State()</tt> method returns a reference to a state variable that may be used for reading and writing states. When there is no state variable with the specified name available in the system, an error message is displayed. For details, see <a href="Programming_Reference%253AError_Handling.html#Accessing_Environment_Objects" title="Programming Reference:Error Handling">Accessing Environment Objects</a>.
</p>
<h3><span id="StateRef_OptionalState(string_Name)"></span><span class="mw-headline" id="StateRef_OptionalState.28string_Name.29">StateRef OptionalState(string Name)</span></h3>
<p>The <tt>OptionalState()</tt> method is identical to the <tt>State()</tt> method except that it does not generate an error message for an unavailable state; rather, a reference to a temporary state object is returned, initialized to a default value. The default value may be specified as a number or a string, and itself defaults to "0".
</p>
<h2><span class="mw-headline" id="Instantiation">Instantiation</span></h2>
<p><tt>EnvironmentExtension</tt> components may be used freely as members or ancestors of any other class in a BCI2000 module. When writing an extension component that is independent of existing classes, it may be instantiated from its own source code file by putting a
</p>
<pre>Extension( ClassName );
</pre>
<p>statement at the top of that file.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="Programming_Reference%253AGenericFilter_Class.html" title="Programming Reference:GenericFilter Class">Programming Reference:GenericFilter Class</a>, <a href="Technical_Reference%253AStates_of_Operation.html" title="Technical Reference:States of Operation">Technical Reference:States of Operation</a>, <a href="Technical_Reference%253AParameter_Definition.html" title="Technical Reference:Parameter Definition">Technical Reference:Parameter Definition</a>, <a href="Technical_Reference%253AState_Definition.html" title="Technical Reference:State Definition">Technical Reference:State Definition</a>, <a href="Programming_Reference%253AError_Handling.html#Accessing_Environment_Objects" title="Programming Reference:Error Handling">Programming Reference:Error Handling#Accessing Environment Objects</a>
</p>
<!-- 
NewPP limit report
Cached time: 20230524193558
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.023 seconds
Real time usage: 0.026 seconds
Preprocessor visited node count: 88/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 421/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:1830-0!canonical and timestamp 20230524193558 and revision id 9870
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=Programming_Reference:EnvironmentExtension_Class&amp;oldid=9870">http://www.bci2000.org/mediawiki/index.php?title=Programming_Reference:EnvironmentExtension_Class&amp;oldid=9870</a>"</div>
 </div>
</body>
</html>