<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Technical Reference:Core Modules - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul><li class="toc1">System Design and Communication Protocols</li><ul><li class="toc2"><a href="Technical_Reference%253ASystem_Design.html">System Design</a></li><li class="toc2">Core Modules</li><li class="toc2"><a href="Technical_Reference%253AStates_of_Operation.html">States of Operation</a></li></ul><li class="toc1">Transmission Protocol Specification</li><ul><li class="toc2"><a href="Technical_Reference%253ABCI2000_Messages.html">BCI2000 Messages</a></li><li class="toc2"><a href="Technical_Reference%253AParameter_Definition.html">Parameter Definition</a></li><li class="toc2"><a href="Technical_Reference%253AState_Definition.html">State Definition</a></li><li class="toc2"><a href="Technical_Reference%253AVisualization_Properties.html">Visualization Properties</a></li></ul><li class="toc1">File Formats</li><ul><li class="toc2"><a href="Technical_Reference%253ABCI2000_File_Format.html">Data File Format</a></li><li class="toc2"><a href="Technical_Reference%253AParameter_File.html">Parameter File Format</a></li></ul><li class="toc1">External Interfaces</li><ul><li class="toc2"><a href="Technical_Reference%253AApp_Connector.html">App Connector</a></li><li class="toc2"><a href="Technical_Reference%253AOperator_Library.html">Operator Library</a></li><li class="toc2"><a href="Technical_Reference%253ABCI2000Remote_Library.html">BCI2000Remote</a></li></ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">Core Modules</h1>
 <p class = "subtitle">Technical Reference</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>Of the four BCI2000 modules, three make up the <i>Core Modules</i>: <i>Data Acquisition</i>, <i>Signal Processing</i>, and <i>User Application</i>.
Between core modules, data flow in a closed loop, clocked by data acquisition hardware.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Technical_Reference%253ACore_Modules.html#Signal_Source_Module"><span class="tocnumber">1</span> <span class="toctext">Signal Source Module</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Technical_Reference%253ACore_Modules.html#Data_Acquisition_and_Storage_Loop"><span class="tocnumber">1.1</span> <span class="toctext">Data Acquisition and Storage Loop</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Technical_Reference%253ACore_Modules.html#Real-Time_Constraint"><span class="tocnumber">1.2</span> <span class="toctext">Real-Time Constraint</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Technical_Reference%253ACore_Modules.html#State_Vector_Storage"><span class="tocnumber">1.3</span> <span class="toctext">State Vector Storage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="Technical_Reference%253ACore_Modules.html#Signal_Processing_Module"><span class="tocnumber">2</span> <span class="toctext">Signal Processing Module</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="Technical_Reference%253ACore_Modules.html#Module_Independence"><span class="tocnumber">3</span> <span class="toctext">Module Independence</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="Technical_Reference%253ACore_Modules.html#Assumptions_and_Dependencies"><span class="tocnumber">4</span> <span class="toctext">Assumptions and Dependencies</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Technical_Reference%253ACore_Modules.html#Application_Module"><span class="tocnumber">5</span> <span class="toctext">Application Module</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Technical_Reference%253ACore_Modules.html#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Signal_Source_Module">Signal Source Module</span></h2>
<p>The role of the Signal Source module is to wait for data
blocks
coming in from the A/D hardware, and to send these blocks of data on
to Signal
Processing, thus acting as the on-line system's "metronome"
synchronized to
the A/D hardware clock.
At the same time, it receives state vector information from the
Application
module, and saves this state vector information to a file in BCI2000
.dat
format, together with the raw digitized data.
</p>
<h3><span class="mw-headline" id="Data_Acquisition_and_Storage_Loop">Data Acquisition and Storage Loop</span></h3>
<p>During normal operation (<i>Running</i>  is 1), the Signal Source module
runs a data acquisition and storage loop that has the following structure:
</p>
<pre>1: While Running
2:   Save state vector to file
3:   Wait for A/D data
4:   Send A/D data to Signal Processing
5:   Wait for state vector from Application
6:   Save A/D data to file
</pre>
<h3><span class="mw-headline" id="Real-Time_Constraint">Real-Time Constraint</span></h3>
<p>Note that statement 3 as well as statement 5 are blocking operations, i.e., the module will wait for A/D data as well as for the state vector data
coming in from the Application module.
This mode of operation imposes a real-time constraint on signal processing, and therefore requires a "sufficiently fast" system to work properly.
For our purposes, a "sufficiently fast" system is a system where
</p>
<ul><li>synchronous I/O operations (2, 4, 5, and 6) require an execution time that is small compared to the duration of a data block (as given by the sampling rate and the sample block size), and</li>
<li>the time required by the Signal Processing and Application modules for processing the data sent out in statement 4 is small compared to the duration of a data block.</li></ul>
<p>In an on-line system, the time between sampling of a data block, and
display
of the resulting feedback information to the subject, is critical.
Given a "sufficiently fast" system as defined above, only statement 4
will enter
into this critical time path, while the time spent on execution of the
remaining
statements will reduce the waiting interval occurring in statement 3.
</p>
<h3><span class="mw-headline" id="State_Vector_Storage">State Vector Storage</span></h3>
<p>For the data in the file, the state vector which results from processing a data block <img class="mwe-math-fallback-image-inline tex" alt="n" src="../images/math/7/b/8/7b8b965ad4bca0e41ab51de7b31363a1.png" /> is saved together with the following block, <img class="mwe-math-fallback-image-inline tex" alt="n+1" src="../images/math/4/0/b/40b85027598d87611b1c8d5d11e46812.png" />. For the first block, a state vector is saved that contains initial values.
Note that the <i>SourceTime</i> state is an exception insofar as it matches the acquisition time of the current block.
As a result, the <i>StimulusTime</i> state (and similar states) will always have a smaller value than the <i>SourceTime</i> state, and needs to be referenced to the <i>SourceTime</i> state of the previous block in order to obtain processing delay.
</p>
<h2><span class="mw-headline" id="Signal_Processing_Module">Signal Processing Module</span></h2>
<p>Signal Processing acts like a black box to the rest of the system - it receives brain signals from the Signal Source and sends control signals on to the Application. 
</p><p>The data flow in a typical implementation is as follows:
</p>
<pre>selected channels from data acquisition -&gt; [Spatial Filter] -&gt; spatially filtered signal
-&gt; [Temporal Filter] -&gt; temporally filtered signal -&gt; [Classifier] -&gt; control signal
-&gt; [Normalizer] -&gt; normalized control signal to go to application
</pre>
<p>There are basically 4 main filters (Spatial Filter, Temporal Filter, Classifier, and
Normalizer) connected in form of a pipe: Each filter's output is the input to the next filter, and all filters act on each input block of data in sequence.
For each input block of data, there must be a resulting output block.
</p>
<h2><span class="mw-headline" id="Module_Independence">Module Independence</span></h2>
<p>One of the goals for BCI2000 is for each module to be as independent of the others as possible. 
For example, Signal Processing should not have to take the type of data collection
hardware into account. For the same reason, Application should (ideally) not have to
know about the signal processing method used. While in real-world situations this will not be possible, control signals shall be zero mean (to the extent that this is possible), shall be normalized to unit gain, and each value shall be equally accessible by the user's
brain signals.
In this fashion, the interdependence between Signal Processing and
Application can be minimized.
</p>
<h2><span class="mw-headline" id="Assumptions_and_Dependencies">Assumptions and Dependencies</span></h2>
<p>BCI2000 core modules can contain instances of multiple filter classes.
These filter classes cannot assume any specific values for system-wide parameters such as
<i>SampleBlockSize</i>,
<i>SamplingRate</i>, or <i>TransmitCh</i>. Rather, they have to be able to
adapt their functionality according to these three parameters -- they might
not only be used in scenarios with varying parameters, but they might also have
to work together with other filters. Therefore, hard coded assumptions about
system-wide parameters have to be avoided.
</p>
<h2><span class="mw-headline" id="Application_Module">Application Module</span></h2>
<p>One major goal for
BCI2000 system design is the independence between modules. In most BCI
systems, however, some parts of the applied signal processing module (i.e., the device-dependent part of signal processing) depend on the feedback to the user - a feature
provided by the user application module.
This inter-dependence between the signal processing and the user
application modules poses severe problems to the system design, because it is not possible to
completely encapsulate each module and separate it from others.
In order to minimize inter-dependence, duties should be performed by the module that is conceptually defining the feature. For example, task paradigm and timing are, conceptually, parts of a task and should therefore be handled by the user application module.
<a href="User_Reference%253ACursorTask.html" title="User Reference:CursorTask">User Reference:CursorTask</a> is an implementation of a such a user task - a simple cursor task - that complies with the idea of minimal inter-dependence.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="Technical_Reference%253ASystem_Design.html" title="Technical Reference:System Design">Technical Reference:System Design</a>, <a href="https://www.bci2000.org/mediawiki/index.php/User_Reference:Timing" title="User Reference:Timing">User Reference:Timing</a>
</p>
<!-- 
NewPP limit report
Cached time: 20230524000709
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.014 seconds
Real time usage: 0.018 seconds
Preprocessor visited node count: 43/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 456/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:1585-0!canonical!math=0 and timestamp 20230524000709 and revision id 9333
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=Technical_Reference:Core_Modules&amp;oldid=9333">http://www.bci2000.org/mediawiki/index.php?title=Technical_Reference:Core_Modules&amp;oldid=9333</a>"</div>
 </div>
</body>
</html>