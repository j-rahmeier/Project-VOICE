<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Contributions:CCEPFilter - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul><li class="toc1"><a href="Contributions%253AADCs.html">Data Acquisition</a></li><li class="toc1"><a href="Contributions%253AFileWriters.html">File Formats</a></li><li class="toc1"><a href="Contributions%253ASignalProcessing.html">Signal Processing</a></li><li class="toc1"><a href="Contributions%253AApplications.html">Applications</a></li><li class="toc1"><a href="Contributions%253ATools.html">Tools</a></li></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">CCEPFilter</h1>
 <p class = "subtitle">Contributions</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div class="thumb tright"><div class="thumbinner" style="width:494px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:CCEP_gif.gif" class="image"><img alt="" src="../images/e/e2/CCEP_gif.gif" decoding="async" width="492" height="289" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://www.bci2000.org/mediawiki/index.php/File:CCEP_gif.gif" class="internal" title="Enlarge"></a></div>An example video showing one channel of the CCEP filter.</div></div></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Contributions%253ACCEPFilter.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Contributions%253ACCEPFilter.html#Location"><span class="tocnumber">2</span> <span class="toctext">Location</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Contributions%253ACCEPFilter.html#Versioning"><span class="tocnumber">3</span> <span class="toctext">Versioning</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Contributions%253ACCEPFilter.html#Authors"><span class="tocnumber">3.1</span> <span class="toctext">Authors</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Contributions%253ACCEPFilter.html#Version_History"><span class="tocnumber">3.2</span> <span class="toctext">Version History</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Contributions%253ACCEPFilter.html#Source_Code_Revisions"><span class="tocnumber">3.3</span> <span class="toctext">Source Code Revisions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="Contributions%253ACCEPFilter.html#Integration_into_BCI2000"><span class="tocnumber">4</span> <span class="toctext">Integration into BCI2000</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Contributions%253ACCEPFilter.html#Important_Limitations"><span class="tocnumber">5</span> <span class="toctext">Important Limitations</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Contributions%253ACCEPFilter.html#Parameters"><span class="tocnumber">6</span> <span class="toctext">Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="Contributions%253ACCEPFilter.html#General_Configuration"><span class="tocnumber">6.1</span> <span class="toctext"><i>General Configuration</i></span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="Contributions%253ACCEPFilter.html#ChannelThreshold"><span class="tocnumber">6.1.1</span> <span class="toctext">ChannelThreshold</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="Contributions%253ACCEPFilter.html#OnsetExpression"><span class="tocnumber">6.1.2</span> <span class="toctext">OnsetExpression</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="Contributions%253ACCEPFilter.html#Stimulator"><span class="tocnumber">6.1.3</span> <span class="toctext">Stimulator</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="Contributions%253ACCEPFilter.html#Duration_settings"><span class="tocnumber">6.2</span> <span class="toctext"><i>Duration settings</i></span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="Contributions%253ACCEPFilter.html#BaselineEpochLength"><span class="tocnumber">6.2.1</span> <span class="toctext">BaselineEpochLength</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="Contributions%253ACCEPFilter.html#TriggerLatencyLength"><span class="tocnumber">6.2.2</span> <span class="toctext">TriggerLatencyLength</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="Contributions%253ACCEPFilter.html#CCEPEpochLength"><span class="tocnumber">6.2.3</span> <span class="toctext">CCEPEpochLength</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="Contributions%253ACCEPFilter.html#Counting_settings"><span class="tocnumber">6.3</span> <span class="toctext"><i>Counting settings</i></span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="Contributions%253ACCEPFilter.html#EpochsToAverage"><span class="tocnumber">6.3.1</span> <span class="toctext">EpochsToAverage</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="Contributions%253ACCEPFilter.html#OnsetPeriod"><span class="tocnumber">6.3.2</span> <span class="toctext">OnsetPeriod</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="Contributions%253ACCEPFilter.html#HoldPlots"><span class="tocnumber">6.3.3</span> <span class="toctext">HoldPlots</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="Contributions%253ACCEPFilter.html#Visualization"><span class="tocnumber">6.4</span> <span class="toctext"><i>Visualization</i></span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="Contributions%253ACCEPFilter.html#VisImageWidth"><span class="tocnumber">6.4.1</span> <span class="toctext">VisImageWidth</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="Contributions%253ACCEPFilter.html#VisImageHeight"><span class="tocnumber">6.4.2</span> <span class="toctext">VisImageHeight</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="Contributions%253ACCEPFilter.html#VisMaxWindows"><span class="tocnumber">6.4.3</span> <span class="toctext">VisMaxWindows</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="Contributions%253ACCEPFilter.html#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Cortico-cortical evoked potentials (CCEPs) are generated as a response to stimulation within the cortical zone. To best view this response, the CCEP filter time locks the signal to the stimulation and allows the user to view the CCEPS from every recording electrode. There are many adaptable parameters to include flexibility for a variety of experiments.
</p>
<h2><span class="mw-headline" id="Location">Location</span></h2>
<p><a rel="nofollow" class="external free" href="http://www.bci2000.org/svn/trunk/src/contrib/SignalProcessing/CCEPFilter">http://www.bci2000.org/svn/trunk/src/contrib/SignalProcessing/CCEPFilter</a>
</p>
<h2><span class="mw-headline" id="Versioning">Versioning</span></h2>
<h3><span class="mw-headline" id="Authors">Authors</span></h3>
<ul><li>Will Engelhardt (engelhardt@neurotechcenter.org)</li></ul>
<h3><span class="mw-headline" id="Version_History">Version History</span></h3>
<ul><li>05/17/2023 - First working version</li></ul>
<h3><span class="mw-headline" id="Source_Code_Revisions">Source Code Revisions</span></h3>
<ul><li>Initial development: 7199</li>
<li>Tested under: 7303</li>
<li>Known to compile under: 7364</li>
<li>Broken since: --</li></ul>
<h2><span class="mw-headline" id="Integration_into_BCI2000">Integration into BCI2000</span></h2>
<p>Confirm your BCI2000 svn is up to date and you have built the most recent version.
Insert <code>Start executable CCEPFilter --local</code> as the SignalProcessing filter into the batch file that you want to run. 
</p>
<h2><span class="mw-headline" id="Important_Limitations">Important Limitations</span></h2>
<p>The CCEP filter processing time should be below the block size timing. There are certain parameters that increase the time it takes to process the desired data for the CCEP visualization. Here are the parameters that as they are increased, they increase the necessary block size timing:
</p>
<ul><li><b>Sampling Rate</b></li>
<li>All <i>Duration Settings</i>: <b>BaselineEpochLength</b>, <b>TriggerLatencyLength</b>, and <b>CCEPEpochLength</b></li>
<li><b>VisMaxWindows</b></li></ul>
<p>The parameter <b>HoldPlots</b> won't increase the block size timing, however making it too large will increase the round-trip timing. This can make all BCI2000 visualizations delayed, including the Raw Signal and the Timing Window. However, even if the real-time visualization is messed up, the data will still be saved correctly.
</p><p>To be sure using the filter won't cause a disruption of the block-size timing, test your desired parameters before an experiment.
</p>
<h2><span class="mw-headline" id="Parameters">Parameters</span></h2>
<h3><span class="mw-headline" id="General_Configuration"><u><i>General Configuration</i></u></span></h3>
<h4><span class="mw-headline" id="ChannelThreshold">ChannelThreshold</span></h4>
<p>Magnitude threshold which defines a CCEP. Specify the units, such as uV or mV. The surpassing of this threshold is calculated with the CCEPEpochLength data (after the specified TriggerLatencyLength) after being subtracted from the average baseline value (the data during the BaselineEpochLength). If the threshold is surpassed, the channel is yellow. A horizontal bar is also displayed to show where the signal surpasses the threshold. If both the high and low thresholds are surpassed, both bars are displayed. If the signal stays below the threshold, it stays white.
</p>
<h4><span class="mw-headline" id="OnsetExpression">OnsetExpression</span></h4>
<p>Expression that defines the stimulus onset. See the <a href="User_Reference%253AExpression_Syntax.html" title="User Reference:Expression Syntax"> Expression syntax page</a> for more information. This expression should be true when the stimulation is triggered.
</p>
<h4><span class="mw-headline" id="Stimulator">Stimulator</span></h4>
<p>An optional setting that configures parameters for a certain device. Currently, only the NeuroOmega is implemented. This setting helps fills in other settings that are "auto" (such as TriggerLatencyLength), and configures the visualization to show which channels are stimulating in light blue. Keep it as auto if the device is not listed.
</p>
<h3><span class="mw-headline" id="Duration_settings"><u><i>Duration settings</i></u></span></h3>
<p>These parameters all should have units of time (e.g. milliseconds), or auto.
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 693.33333333333px"><div style="width: 693.33333333333px">
			<div class="thumb" style="width: 691.33333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:CCEPTimingVisualization.png" class="image"><img alt="" src="../images/9/97/CCEPTimingVisualization.png" decoding="async" width="692" height="450" /></a></div></div>
			<div class="gallerytext">
<p>The three timing sections of the CCEP filter visualization.
</p>
			</div>
		</div></li>
</ul>
<h4><span class="mw-headline" id="BaselineEpochLength">BaselineEpochLength</span></h4>
<p>The duration of desired baseline data. This baseline data is helpful for visualizing the data before the stimulation, and is also used to calculate the average signal value from which the threshold is calculated.
</p>
<h4><span class="mw-headline" id="TriggerLatencyLength">TriggerLatencyLength</span></h4>
<p>Approximate latency of the hardware stimulation from the OnsetExpression. The timing should surpass the stimulation artifact of the signal, so the CCEP is accurately calculated. If the length is too small, then the scaling of the visualization will be off, and the calculation of detecting CCEPs will also be inaccurate.
</p>
<h4><span class="mw-headline" id="CCEPEpochLength">CCEPEpochLength</span></h4>
<p>Duration of time after the baseline and latency. Essentially the amount of time that is needed to view the CCEP.
</p>
<h3><span class="mw-headline" id="Counting_settings"><u><i>Counting settings</i></u></span></h3>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 616.66666666667px"><div style="width: 616.66666666667px">
			<div class="thumb" style="width: 614.66666666667px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:CCEPCountingVisualization.png" class="image"><img alt="" src="../images/thumb/c/ca/CCEPCountingVisualization.png/922px-CCEPCountingVisualization.png" decoding="async" width="615" height="450" srcset="../images/c/ca/CCEPCountingVisualization.png 1.5x" /></a></div></div>
			<div class="gallerytext">
<p>The three counting parameters of the CCEP filter visualization. The yellow circles represent counting every third OnsetExpression, then the pink arrows display averaging every 5th number. The original plot is then held because HoldPlots is greater than 1.
</p>
			</div>
		</div></li>
</ul>
<p>These parameters must be integers, they specify a quantity to count. 
</p>
<h4><span class="mw-headline" id="EpochsToAverage">EpochsToAverage</span></h4>
<p>Number of times the OnsetExpression is met to average together. The resulting average will then be displayed once the number is met. This is helpful if the OnsetExpression is frequently true within a short period of time.
</p>
<h4><span class="mw-headline" id="OnsetPeriod">OnsetPeriod</span></h4>
<p>Count every number of times the OnsetExpression is evaluated true. In other words, skip every OnsetPeriod - 1. This is helpful if you want to visualize a time range in which the OnsetExpression is met multiple times. If you are also averaging the plots, it will only average the signals specified by this period.
</p>
<h4><span class="mw-headline" id="HoldPlots">HoldPlots</span></h4>
<p>The number of plots to hold. If it is 0 or 1, only the most recent signal will be shown. Any number higher, and that amount of signals will be shown. The most recent signal will always be white/yellow, while the others will be darker grey, with the oldest as the darkest.
</p>
<h3><span class="mw-headline" id="Visualization"><u><i>Visualization</i></u></span></h3>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 699.33333333333px"><div style="width: 699.33333333333px">
			<div class="thumb" style="width: 697.33333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:CCEPVisualizationImg.png" class="image"><img alt="" src="../images/thumb/9/94/CCEPVisualizationImg.png/1046px-CCEPVisualizationImg.png" decoding="async" width="698" height="450" srcset="../images/9/94/CCEPVisualizationImg.png 1.5x" /></a></div></div>
			<div class="gallerytext">
<p>A demonstration of the three visualization parameters of the CCEP filter. The specific channels are chosen through the Source parameter Online Processing.
</p>
			</div>
		</div></li>
</ul>
<h4><span class="mw-headline" id="VisImageWidth">VisImageWidth</span></h4>
<p>The total width in pixels that the CCEP visualization will fill. Each sub-window will be adjusted accordingly.
</p>
<h4><span class="mw-headline" id="VisImageHeight">VisImageHeight</span></h4>
<p>The total height in pixels that the CCEP visualization will fill. Each sub-window will fill a portion.
</p>
<h4><span class="mw-headline" id="VisMaxWindows">VisMaxWindows</span></h4>
<p>The maximum amount of windows that are desired to be visualized. To choose which windows are visualized, use the parameter in the Source tab, in the <i>Online Processing</i> section, <b>TransmitChList</b>. This lists the channels that are sent to the SignalProcessing filter and on. If VisMaxWindows is less than the number of channels in this list (and non-zero), the first number of windows will be shown.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="User_Reference%253AFilters.html" title="User Reference:Filters">User Reference:Filters</a>, <a href="Contributions%253ASignalProcessing.html" title="Contributions:SignalProcessing">Contributions:SignalProcessing</a>
</p>
<!-- 
NewPP limit report
Cached time: 20230524000504
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.035 seconds
Real time usage: 0.038 seconds
Preprocessor visited node count: 97/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 2142/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:2548-0!canonical and timestamp 20230524000504 and revision id 10197
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=Contributions:CCEPFilter&amp;oldid=10197">http://www.bci2000.org/mediawiki/index.php?title=Contributions:CCEPFilter&amp;oldid=10197</a>"</div>
 </div>
</body>
</html>