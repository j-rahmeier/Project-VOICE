<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>User Tutorial:Analyzing the Initial Mu Rhythm Session - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul><li class="toc1"><a href="User_Tutorial%253ABCI2000_Tour.html">Tour</a></li><li class="toc1"><a href="User_Tutorial%253AMu_Rhythm_BCI_Tutorial.html">Mu Tutorial</a></li><li class="toc1"><a href="User_Tutorial%253AP300_BCI_Tutorial.html">P300 Tutorial</a></li></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">Analyzing the Initial Mu Rhythm Session</h1>
 <p class = "subtitle">User Tutorial</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>This tutorial step assumes that you have <a href="User_Tutorial%253AObtaining_Mu_Rhythm_Parameters_in_an_Initial_Session.html" title="User Tutorial:Obtaining Mu Rhythm Parameters in an Initial Session">performed an initial mu rhythm session</a>. In order to identify the parameters (i.e., frequency and location) of a subject's mu rhythm, we will determine how different the EEG signal amplitude is for different types of imaginations that the subject performed during the recording. You will use the <a href="User_Reference%253ABCI2000_Offline_Analysis.html" title="User Reference:BCI2000 Offline Analysis">BCI2000 Offline Analysis</a> tool for this purpose.
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="User_Tutorial%253AAnalyzing_the_Initial_Mu_Rhythm_Session.html#Generating_a_Feature_Plot"><span class="tocnumber">1</span> <span class="toctext">Generating a Feature Plot</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="User_Tutorial%253AAnalyzing_the_Initial_Mu_Rhythm_Session.html#Generating_Spectra_and_Topography_Plots"><span class="tocnumber">2</span> <span class="toctext">Generating Spectra and Topography Plots</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="User_Tutorial%253AAnalyzing_the_Initial_Mu_Rhythm_Session.html#Analyzing_Remaining_Conditions"><span class="tocnumber">3</span> <span class="toctext">Analyzing Remaining Conditions</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="User_Tutorial%253AAnalyzing_the_Initial_Mu_Rhythm_Session.html#Picking_Optimal_Features"><span class="tocnumber">4</span> <span class="toctext">Picking Optimal Features</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="User_Tutorial%253AAnalyzing_the_Initial_Mu_Rhythm_Session.html#Next_Step"><span class="tocnumber">5</span> <span class="toctext">Next Step</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="User_Tutorial%253AAnalyzing_the_Initial_Mu_Rhythm_Session.html#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Generating_a_Feature_Plot">Generating a Feature Plot</span></h2>
<p>The first step in these analyses is to separate data into amplitudes at individual <b>frequencies</b> and <b>locations.</b> These amplitudes are called <i>features,</i> and their correspondence with the subject's movements will be plotted as a so-called <i>feature map.</i> From a feature map, it is possible to determine those frequencies and locations whose amplitude is maximally correlated with the subject's task, i.e., those features that are most different between two conditions. These features will subsequently be used to provide feedback in a BCI experiment.
</p>
<div class="floatright"><a href="https://www.bci2000.org/mediawiki/index.php/File:OfflineANA.PNG" class="image"><img alt="OfflineANA.PNG" src="../images/thumb/3/3d/OfflineANA.PNG/700px-OfflineANA.PNG" width="700" height="409" srcset="../images/3/3d/OfflineANA.PNG 1.5x" /></a></div>
<p>To generate a feature plot from the initial session's data, perform the following steps:
</p>
<ul><li>Start the <a href="User_Reference%253ABCI2000_Offline_Analysis.html" title="User Reference:BCI2000 Offline Analysis">BCI2000 Offline Analysis</a> tool:
<ul><li>If you have a version of Matlab installed, run <tt>tools/OfflineAnalysis/OfflineAnalysis.bat</tt>.</li>
<li>Otherwise, follow the instructions provided <a href="User_Reference%253ABCI2000_Offline_Analysis.html#Systems_that_do_not_have_MATLAB_installed_or_with_versions_that_predate_MATLAB_v7.0" title="User Reference:BCI2000 Offline Analysis">elsewhere</a>.</li></ul></li>
<li>In the <b>Analysis Domain</b> field, choose <i>Frequency</i>.</li>
<li>In the <b>Acquisition Type</b> field, choose "EEG".</li>
<li>As a <b>Spatial Filter</b>, choose "Common Average Reference (CAR)".</li>
<li>Enter <tt>auto</tt> into the <b>Trial Change Condition</b> field.</li>
<li>Into the field labeled <b>Target Condition 1</b>, enter <tt>states.StimulusCode == 0</tt>.</li>
<li>Enter the word "Rest" into the field labeled <b>Target Condition Label 1</b>.</li>
<li>Similarly, enter <tt>states.StimulusCode == 2</tt> into the <b>Target Condition 2</b> field, and "Right Hand" into <b>Target Condition Label 2</b>.</li>
<li>Click the "Add" button located besides the <b>Data Files</b> field. A file chooser dialog will appear; navigate to <tt>data/mu/&lt;Subject&gt;001</tt>, and select all <tt>.dat</tt> files available there (use your keyboard's <i>ctrl</i> button to click-select multiple files), then click the dialog's "Open" button.</li>
<li>Click "Generate Plots", and wait for the feature plot to appear.</li></ul>
<p>Once the computation is complete, you will see a feature plot similar to the one below. In that plot, the horizontal axis corresponds to frequencies, and the vertical axis corresponds to individual channels. Color codes represent <a href="Glossary.html#r-squared" title="Glossary">r-squared</a> values, which are numbers between 0 and 1. R-squared values provide a measure for the amount to which a particular EEG feature (i.e., amplitude at a particular frequency and location) is influenced by the subject's task (e.g., hand vs. foot movements).
</p><p><a href="https://www.bci2000.org/mediawiki/index.php/File:Eeg1FeaturePlt.png" class="image"><img alt="Eeg1FeaturePlt.png" src="../images/thumb/8/8d/Eeg1FeaturePlt.png/600px-Eeg1FeaturePlt.png" width="600" height="481" srcset="../images/thumb/8/8d/Eeg1FeaturePlt.png/900px-Eeg1FeaturePlt.png 1.5x, ../images/thumb/8/8d/Eeg1FeaturePlt.png/1200px-Eeg1FeaturePlt.png 2x" /></a>
</p><p>Typically, there will be clusters of large r-squared values in the feature plot. The initial step to configure the online system is to determine which brain signal feature differed the most between two particular tasks.  This is accomplished by picking the largest r-squared value from the map and by noting its corresponding frequency and location.  However, it is important to verify whether the feature in question is consistent with the <a href="User_Tutorial%253AIntroduction_to_the_Mu_Rhythm.html#Physical_Properties" title="User Tutorial:Introduction to the Mu Rhythm">mu rhythm's known properties</a>. This verification is necessary to avoid misconfiguration due to <a href="User_Tutorial%253AEEG_Measurement_Setup.html#EEG_Artifacts" title="User Tutorial:EEG Measurement Setup">EEG artifacts</a>, other noise, or random effects.
</p>
<h2><span class="mw-headline" id="Generating_Spectra_and_Topography_Plots">Generating Spectra and Topography Plots</span></h2>
<ul><li>Pick the four largest r-squared values from the feature map between 9 and 36Hz, and read off their frequencies and channels. The plot's "Data Cursor" tool (<i>Data Cursor</i> from the <i>Tools</i> menu) may be helpful for this.</li>
<li>In the analysis program's <b>Spectra Channels</b> field, enter the channels you read off the feature map.</li>
<li>In the <b>Topo Frequencies</b> field, enter the frequencies you read off the feature map.</li>
<li>Click the <b>Generate Plots</b> button.</li></ul>
<p><a href="https://www.bci2000.org/mediawiki/index.php/File:MuRhythmModulation.PNG" class="image"><img alt="MuRhythmModulation.PNG" src="../images/thumb/7/70/MuRhythmModulation.PNG/600px-MuRhythmModulation.PNG" width="600" height="478" srcset="../images/thumb/7/70/MuRhythmModulation.PNG/900px-MuRhythmModulation.PNG 1.5x, ../images/7/70/MuRhythmModulation.PNG 2x" /></a>
</p><p>The generated <b>topography plots</b> display the spatial distribution of r-squared values. In this comparison of EEG activity for right-hand movements and rest, there should be a clear maximum of r-squared values over the <i>left</i> motor cortex as shown in subfigure (A) and (B) above. 
The generated <b>spectra plots</b> display amplitude distributions, and r-squared measure, over frequencies. Ideally, they should appear similar to the  (C) and (D) subfigures above.
</p>
<h2><span class="mw-headline" id="Analyzing_Remaining_Conditions">Analyzing Remaining Conditions</span></h2>
<p>Up to now, you performed an analysis of how brain activity is related to imagined movements of the <b>Right Hand.</b> In order to choose the most useful channel and frequency for online feedback, perform similar analyses for the remaining conditions:
</p>
<ul><li>In the analysis program's <b>Target Condition 2</b> field, enter <tt>states.StimulusCode == 1</tt>, and <i>Left Hand</i> into <b>Target Condition Label 2</b>.</li>
<li>Make sure the <b>Overwrite existing plots</b> check box is unchecked.</li>
<li>Click <i>Generate Plots</i> to create a feature plot for imagined movement of the left hand.</li>
<li>As previously, pick the four largest r-squared values, and compute spectra and topographies for their channels and frequencies.</li>
<li>Results should somewhat resemble that derived for the right hand, except that the colored activity changes should appear over the right and not the left motor cortex.</li>
<li>Repeat the analysis for conditions <tt>states.StimulusCode == 3</tt>: <i>Both Hands</i>, and <tt>states.StimulusCode == 4</tt>: <i>Both Feet</i>.
<ul><li>For the <i>both hands</i> condition, the result should resemble a combination of <i>left hand</i> and <i>right hand</i> results.</li>
<li>For <i>both feet,</i> modulated activity should be centered around electrode Cz.</li></ul></li></ul>
<h2><span class="mw-headline" id="Picking_Optimal_Features">Picking Optimal Features</span></h2>
<p>Here we are looking for the frequency with the highest r-squared value between 9Hz and 36Hz. Further, acceptable readings are centered on the proper electrode for the predicted stimulus; C3 for readings from the right hand, C4 for the left hand, both C3 and C4 for both hands, and Cz for both feet.
</p><p>Equipped with the frequency and electrode that provides the reading with the highest r-squared value, we can begin configuring the setup for proper use.
</p>
<h2><span class="mw-headline" id="Next_Step">Next Step</span></h2>
<p><a href="User_Tutorial%253AConfiguring_Online_Feedback.html" title="User Tutorial:Configuring Online Feedback">Configuring Online Feedback</a> shows you how to configure the BCI system using the parameters obtained in the analysis.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="User_Tutorial%253AMu_Rhythm_BCI_Tutorial.html" title="User Tutorial:Mu Rhythm BCI Tutorial">User Tutorial:Mu Rhythm BCI Tutorial</a>
</p>
<!-- 
NewPP limit report
Cached time: 20200806205945
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.025 seconds
Real time usage: 0.054 seconds
Preprocessor visited node count: 23/1000000
Preprocessor generated node count: 28/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:1876-0!canonical and timestamp 20200806205945 and revision id 8366
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=User_Tutorial:Analyzing_the_Initial_Mu_Rhythm_Session&amp;oldid=8366">http://www.bci2000.org/mediawiki/index.php?title=User_Tutorial:Analyzing_the_Initial_Mu_Rhythm_Session&amp;oldid=8366</a>"</div>
 </div>
</body>
</html>