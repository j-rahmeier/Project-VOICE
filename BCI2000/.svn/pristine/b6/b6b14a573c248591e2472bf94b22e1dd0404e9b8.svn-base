<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Contributions:XsensMTwLogger - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul><li class="toc1"><a href="Contributions%253AADCs.html">Data Acquisition</a></li><li class="toc1"><a href="Contributions%253AFileWriters.html">File Formats</a></li><li class="toc1"><a href="Contributions%253ASignalProcessing.html">Signal Processing</a></li><li class="toc1"><a href="Contributions%253AApplications.html">Applications</a></li><li class="toc1"><a href="Contributions%253ATools.html">Tools</a></li></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">XsensMTwLogger</h1>
 <p class = "subtitle">Contributions</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>An BCI2000 extension that records synchronized rotational data into states, using XSens’s MTw motion tracking sensors.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:XSensMTwImage.png" class="image"><img alt="" src="../images/thumb/6/6c/XSensMTwImage.png/300px-XSensMTwImage.png" decoding="async" width="300" height="300" class="thumbimage" srcset="../images/thumb/6/6c/XSensMTwImage.png/450px-XSensMTwImage.png 1.5x, ../images/thumb/6/6c/XSensMTwImage.png/600px-XSensMTwImage.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="https://www.bci2000.org/mediawiki/index.php/File:XSensMTwImage.png" class="internal" title="Enlarge"></a></div>An actual image of a MTw</div></div></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Contributions%253AXsensMTwLogger.html#Location"><span class="tocnumber">1</span> <span class="toctext">Location</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Contributions%253AXsensMTwLogger.html#Versioning"><span class="tocnumber">2</span> <span class="toctext">Versioning</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Contributions%253AXsensMTwLogger.html#Authors"><span class="tocnumber">2.1</span> <span class="toctext">Authors</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Contributions%253AXsensMTwLogger.html#Version_History"><span class="tocnumber">2.2</span> <span class="toctext">Version History</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Contributions%253AXsensMTwLogger.html#Source_Code_Revisions"><span class="tocnumber">2.3</span> <span class="toctext">Source Code Revisions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Contributions%253AXsensMTwLogger.html#Video_Overview"><span class="tocnumber">3</span> <span class="toctext">Video Overview</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="Contributions%253AXsensMTwLogger.html#Functional_Description"><span class="tocnumber">4</span> <span class="toctext">Functional Description</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Contributions%253AXsensMTwLogger.html#Integration_into_BCI2000"><span class="tocnumber">5</span> <span class="toctext">Integration into BCI2000</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Contributions%253AXsensMTwLogger.html#Installation_and_Set-Up"><span class="tocnumber">6</span> <span class="toctext">Installation and Set-Up</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Contributions%253AXsensMTwLogger.html#Coordinate_System"><span class="tocnumber">7</span> <span class="toctext">Coordinate System</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="Contributions%253AXsensMTwLogger.html#Parameters"><span class="tocnumber">8</span> <span class="toctext">Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="Contributions%253AXsensMTwLogger.html#User_configurable_Parameters"><span class="tocnumber">8.1</span> <span class="toctext">User configurable Parameters</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="Contributions%253AXsensMTwLogger.html#LogXsensMTw"><span class="tocnumber">8.1.1</span> <span class="toctext">LogXsensMTw</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="Contributions%253AXsensMTwLogger.html#NumberOfMTws"><span class="tocnumber">8.1.2</span> <span class="toctext">NumberOfMTws</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="Contributions%253AXsensMTwLogger.html#MasterUpdateRate"><span class="tocnumber">8.1.3</span> <span class="toctext">MasterUpdateRate</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="Contributions%253AXsensMTwLogger.html#DataPrescaler"><span class="tocnumber">8.1.4</span> <span class="toctext">DataPrescaler</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="Contributions%253AXsensMTwLogger.html#State_Variables"><span class="tocnumber">9</span> <span class="toctext">State Variables</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="Contributions%253AXsensMTwLogger.html#MTw1X.2C_MTw1Y.2C_MTw1Z"><span class="tocnumber">9.1</span> <span class="toctext">MTw1X, MTw1Y, MTw1Z</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="Contributions%253AXsensMTwLogger.html#Converting_Back_to_Degrees"><span class="tocnumber">10</span> <span class="toctext">Converting Back to Degrees</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="Contributions%253AXsensMTwLogger.html#See_also"><span class="tocnumber">11</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Location">Location</span></h2>
<p><a rel="nofollow" class="external free" href="https://www.bci2000.org/svn/trunk/src/contrib/Extensions/XSensMTwLogger">https://www.bci2000.org/svn/trunk/src/contrib/Extensions/XSensMTwLogger</a>
</p>
<h2><span class="mw-headline" id="Versioning">Versioning</span></h2>
<h3><span class="mw-headline" id="Authors">Authors</span></h3>
<p>Alexander Belsten (belsten@neurotechcenter.org)
</p><p>William Engelhardt (engelhardt@neurotechcenter.org)
</p>
<h3><span class="mw-headline" id="Version_History">Version History</span></h3>
<ul><li>2021-07-06: Initial public release by Alexander Belsten (belsten@neurotechcenter.org)</li></ul>
<h3><span class="mw-headline" id="Source_Code_Revisions">Source Code Revisions</span></h3>
<ul><li>Initial development: 6329</li>
<li>Tested under: 6329</li>
<li>Known to compile under: 6330</li>
<li>Broken since: --</li></ul>
<h2><span class="mw-headline" id="Video_Overview">Video Overview</span></h2>
<p><br />
</p>
<div class="thumb embedvideo  ev_center autoResize" style="width: 908px;"><div class="embedvideo autoResize" style=" width: 906px;"><div class="embedvideowrap" style="width: 900px;"><iframe title="Play video" src="https://www.youtube.com/embed/-SOUX5J1vJE?" width="900" height="506" frameborder="0" allowfullscreen="true"></iframe></div></div></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Functional_Description">Functional Description</span></h2>
<p>Records the X, Y, and Z positions of multiple Xsens MTw (Motion Tracking - wireless) IMUs (Inertial Measurement Units) to events.
</p>
<h2><span class="mw-headline" id="Integration_into_BCI2000">Integration into BCI2000</span></h2>
<p>To enable the extension in your CMake configuration, enable <tt>EXTENSIONS_XSENSMTWLOGGER=On</tt> in the Extensions folder of the CMake GUI and then generate the BCI2000 Visual Studio solution in CMake. Next, open the solution with Visual Studio and rebuild the signal source module with which you want to use the extension.
Once the extension is built into the source module, you can enable it by appending <code>--LogXsensMTw=1</code>  to the source module <tt>start executable</tt> command in your batch file. Also, <code>--NumberOfMTws=1</code> needs to be appended as well. Set this equal to the exact number of MTw's you want connected.
</p>
<h2><span class="mw-headline" id="Installation_and_Set-Up">Installation and Set-Up</span></h2>
<p>To install the drivers for the MTw Awinda, go to their <a rel="nofollow" class="external text" href="https://www.xsens.com/software-downloads">Software Downloads Page</a> and download the latest stable software package for your operating system for "MTw Awinda." This installs the needed drivers; now BCI2000 can connect to the MTws. Mtws are wireless and communicate with your PC via a USB signal receiver. This signal receiver must be plugged into your computer to record from the MTws. This receiver should be blinking in sync with the MTws when they are recording.
</p>
<h2><span class="mw-headline" id="Coordinate_System">Coordinate System</span></h2>
<p>In the figure below, the orange rectangle is the MTw. Three axes are defined, the X, Y, and Z. X and Z range from -180 to 180 degrees, while Y spans from -90 to 90 degrees. All three coordinates are rotational, which means MTws do not directly measure translational movement. 
</p><p><a href="https://www.bci2000.org/mediawiki/index.php/File:XSensMTwCoordinateSystem.png" class="image"><img alt="XSensMTwCoordinateSystem.png" src="../images/0/0f/XSensMTwCoordinateSystem.png" decoding="async" width="960" height="720" /></a>
</p>
<h2><span class="mw-headline" id="Parameters">Parameters</span></h2>
<h3><span class="mw-headline" id="User_configurable_Parameters">User configurable Parameters</span></h3>
<p>The motion trackers are configured in the Source tab within the MTw section.
</p>
<h4><span class="mw-headline" id="LogXsensMTw">LogXsensMTw</span></h4>
<p>Set to 0 (uncheck) to disable the MTw logger, or 1 (checked) to enable the logger. This should be set in your batch file by appending <code>--LogXsensMTw=1</code> to the source module <tt>start executable</tt> command. 
</p>
<h4><span class="mw-headline" id="NumberOfMTws">NumberOfMTws</span></h4>
<p>The exact number of MTw's that will be connected. 1 is the default, but this number can go up to as many MTw's as you have. This parameter should be set in your batch file by appending <code>--NumberOfMTws=X</code>, where X is the number of MTw's that will be connected. This parameter can only be set in the batch file and will not appear in the Source tab. 
</p>
<h4><span class="mw-headline" id="MasterUpdateRate">MasterUpdateRate</span></h4>
<p>A default value of 80 Hz. This is the frequency that data is updated from the MTws to BCI2000. Below is a table provided by their <a rel="nofollow" class="external text" href="https://www.xsens.com/hubfs/Downloads/Manuals/MTw_Awinda_User_Manual.pdf">MTw Awinda User Manual</a> of the maximum update rates relative to the number of MTws connected. 
</p>
<table class="wikitable">
<caption><b>Maximum Update Rates</b>
</caption>
<tbody><tr>
<th>Number of MTws
</th>
<th>Update Rate (Hz)
</th></tr>
<tr>
<td>1-5
</td>
<td>120
</td></tr>
<tr>
<td>6-9
</td>
<td>100
</td></tr>
<tr>
<td>10
</td>
<td>80
</td></tr>
<tr>
<td>11-20
</td>
<td>60
</td></tr>
<tr>
<td>21-32
</td>
<td>40
</td></tr></tbody></table>
<h4><span class="mw-headline" id="DataPrescaler">DataPrescaler</span></h4>
<p>A default value of 10,000,000. The most efficient prescaler is 11,930,464, but for simplicity’s sake this value is rounded. Details about what this value does is located in <a rel="nofollow" class="external text" href="Contributions%253AXsensMTwLogger.html#Converting_Back_to_Degrees">Converting Back to Degrees</a> below.
</p>
<h2><span class="mw-headline" id="State_Variables">State Variables</span></h2>
<h3><span id="MTw1X,_MTw1Y,_MTw1Z"></span><span class="mw-headline" id="MTw1X.2C_MTw1Y.2C_MTw1Z">MTw1X, MTw1Y, MTw1Z</span></h3>
<p>These states record the three rotational data values per MTw. See the <a rel="nofollow" class="external text" href="Contributions%253AXsensMTwLogger.html#Coordinate_System">Coordinate System</a> section to see how X, Y, and Z are defined.  If more than one MTw is connected, their label will continue to increase by 1, i.e., MTw2X, MTw3X, etc. The MTws connect in order of lowest serial code to highest serial code, so if multiple MTws are being recorded, MTw1 will always have the lowest serial code number. The serial codes and their respective IDs are printed in the operator log for clarity’s sake. This allows you to distinguish what MTw is recording to what state.
</p>
<h2><span class="mw-headline" id="Converting_Back_to_Degrees">Converting Back to Degrees</span></h2>
<p>The MTws record data in units of degrees, with the X and Z axes ranging from -180 to 180 degrees, and the Y axis ranging from -90 to 90 degrees. They also record a high precision of 6 decimal places. BCI2000 records integers to states, which means that anything after the decimal point will be cut off. If the data is kept as is, this would greatly reduce the quality of the data we are collecting. 
</p><p>BCI2000 can record states with up to 32 bits, which is the resolution we need to record the high quality data from the MTws. To do this, the original data will be multiplied by the parameter <code>DataPrescaler</code>, and shifted up by 2^31. 
</p><p>To convert the data back into degrees, use Matlab or a similar program to 
</p>
<ol><li>Subtract 2^31 from every value.</li>
<li>Divide the data by the <code>DataPrescaler</code>.</li></ol>
<p>This should now leave you with data in degrees!
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="User_Reference%253ALogging_Input.html" title="User Reference:Logging Input">User Reference:Logging Input</a>, <a href="Contributions%253AExtensions.html" title="Contributions:Extensions">Contributions:Extensions</a>
</p>
<!-- 
NewPP limit report
Cached time: 20230524175514
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.029 seconds
Real time usage: 0.033 seconds
Preprocessor visited node count: 70/1000000
Post‐expand include size: 15/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 343/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:2359-0!canonical and timestamp 20230524175514 and revision id 9912
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=Contributions:XsensMTwLogger&amp;oldid=9912">http://www.bci2000.org/mediawiki/index.php?title=Contributions:XsensMTwLogger&amp;oldid=9912</a>"</div>
 </div>
</body>
</html>