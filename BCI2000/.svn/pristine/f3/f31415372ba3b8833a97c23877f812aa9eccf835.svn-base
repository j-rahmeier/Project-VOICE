<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>User Reference:P300Classifier - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul><li class="toc1"><a href="User_Reference%253AOperator_Module.html">Operator Module</a></li><li class="toc1"><a href="User_Reference%253AOperator_Module_Scripting.html">Operator Scripting</a></li><li class="toc1"><a href="User_Reference%253AModule_Command_Line_Options.html">Module Command Line Options</a></li><li class="toc1"><a href="User_Reference%253AData_File_Formats.html">Data File Formats</a></li><li class="toc1"><a href="User_Reference%253AFilters.html">Configuration Guide</a></li><li class="toc1"><a href="User_FAQ.html">FAQ</a></li><li class="toc1">Applications</li><ul><li class="toc2"><a href="User_Reference%253ACursorTask.html">Cursor Task</a></li><li class="toc2"><a href="User_Reference%253AP3SpellerTask.html">P3Speller Task</a></li><li class="toc2"><a href="https://www.bci2000.org/mediawiki/index.php/User_Reference:StimulusPresentation">Stimulus Presentation</a></li></ul><li class="toc1">Tools</li><ul><li class="toc2"><a href="User_Reference%253ABCI2000Certification.html">BCI2000Certification</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Launcher.html">BCI2000Launcher</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Viewer.html">BCI2000Viewer</a></li><li class="toc2"><a href="User_Reference%253ABCI2000FileInfo.html">BCI2000FileInfo</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Export.html">BCI2000Export</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Analysis.html">BCI2000Analysis</a></li><li class="toc2"><a href="User_Reference%253ABCI2000_Offline_Analysis.html">BCI2000 Offline Analysis</a></li><li class="toc2"><a href="User_Reference%253AEloc_Helper.html">Eloc Helper</a></li><li class="toc2"><a href="User_Reference%253AEEGLabImport.html">EEGLabImport</a></li><li class="toc2"><a href="User_Reference%253AMatlab_Tools.html">Matlab Tools</a></li><li class="toc2"><a href="User_Reference%253AMatlab_MEX_Files.html">Matlab MEX Files</a></li><li class="toc2"><a href="User_Reference%253ACommand_Line_Processing.html">Command Line Processing</a></li></ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">P300Classifier</h1>
 <p class = "subtitle">User Reference</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="User_Reference%253AP300_classifier.html#Synopsis"><span class="tocnumber">1</span> <span class="toctext">Synopsis</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="User_Reference%253AP300_classifier.html#Location"><span class="tocnumber">2</span> <span class="toctext">Location</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="User_Reference%253AP300_classifier.html#Versioning"><span class="tocnumber">3</span> <span class="toctext">Versioning</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="User_Reference%253AP300_classifier.html#Author"><span class="tocnumber">3.1</span> <span class="toctext">Author</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="User_Reference%253AP300_classifier.html#e-mail"><span class="tocnumber">3.2</span> <span class="toctext">e-mail</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="User_Reference%253AP300_classifier.html#Source_Code_Revisions"><span class="tocnumber">3.3</span> <span class="toctext">Source Code Revisions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="User_Reference%253AP300_classifier.html#Control_Panel"><span class="tocnumber">4</span> <span class="toctext">Control Panel</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="User_Reference%253AP300_classifier.html#Data_Pane"><span class="tocnumber">4.1</span> <span class="toctext">Data Pane</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="User_Reference%253AP300_classifier.html#Parameters_Pane"><span class="tocnumber">4.2</span> <span class="toctext">Parameters Pane</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="User_Reference%253AP300_classifier.html#Details_Pane"><span class="tocnumber">4.3</span> <span class="toctext">Details Pane</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="User_Reference%253AP300_classifier.html#Batch_Scripting"><span class="tocnumber">4.4</span> <span class="toctext">Batch Scripting</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="User_Reference%253AP300_classifier.html#Methodology"><span class="tocnumber">5</span> <span class="toctext">Methodology</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="User_Reference%253AP300_classifier.html#Methodology_Concept"><span class="tocnumber">5.1</span> <span class="toctext">Methodology Concept</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="User_Reference%253AP300_classifier.html#Methodology_Step_By_Step"><span class="tocnumber">5.2</span> <span class="toctext">Methodology Step By Step</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="User_Reference%253AP300_classifier.html#Step_1:_Load_BCI2000_Data_Files"><span class="tocnumber">5.2.1</span> <span class="toctext">Step 1: Load BCI2000 Data Files</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="User_Reference%253AP300_classifier.html#Step_2:_Get_P300_Responses"><span class="tocnumber">5.2.2</span> <span class="toctext">Step 2: Get P300 Responses</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="User_Reference%253AP300_classifier.html#Step_3:_Generate_Feature_Weights_for_a_Linear_Model_using_Stepwise_Linear_Discriminant_Analysis_.28SWLDA.29"><span class="tocnumber">5.2.3</span> <span class="toctext">Step 3: Generate Feature Weights for a Linear Model using Stepwise Linear Discriminant Analysis (SWLDA)</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="User_Reference%253AP300_classifier.html#Step_4:_Apply_Linear_Classifier_to_Get_Scores"><span class="tocnumber">5.2.4</span> <span class="toctext">Step 4: Apply Linear Classifier to Get Scores</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="User_Reference%253AP300_classifier.html#Step_5:_Interpret_Scores"><span class="tocnumber">5.2.5</span> <span class="toctext">Step 5: Interpret Scores</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="User_Reference%253AP300_classifier.html#Tutorial"><span class="tocnumber">6</span> <span class="toctext">Tutorial</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="User_Reference%253AP300_classifier.html#Training_the_SWLDA_Classifier"><span class="tocnumber">6.1</span> <span class="toctext">Training the SWLDA Classifier</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="User_Reference%253AP300_classifier.html#Testing_the_SWLDA_Classifier"><span class="tocnumber">6.2</span> <span class="toctext">Testing the SWLDA Classifier</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="User_Reference%253AP300_classifier.html#Example"><span class="tocnumber">6.3</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="User_Reference%253AP300_classifier.html#Future_work"><span class="tocnumber">7</span> <span class="toctext">Future work</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="User_Reference%253AP300_classifier.html#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Synopsis">Synopsis</span></h2>
<p>The P300 Classifier GUI (Graphical User Interface) is a tool that allows to train and test a linear classifier for detection of evoked related potentials collected with <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki">BCI2000</a>. This GUI is designed for the analysis of BCI2000 data collected using the P3Speller or Stimuli Presentation paradigms. The program generates feature weights by using a linear classifier algorithm called Stepwise Linear Discriminant Analysis (SWLDA). The specifics of the feature space and training routine can be manipulated using the GUI. The feature weights derived from the GUI can be saved and imported into BCI2000 as a parameter file fragment (*.prm) for online testing. Unlike the Matlab-based P300 GUI, the P300 Classifier GUI has the main advantage of being completely Matlab independent. All its core functionality is written in C++ accompanied with a friendly graphical user interface written in <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Qt_(toolkit)">Qt</a>. Additionally, this new tool is completely scriptable; that is the investigator can write all the commands needed to train and test the linear classifier in a <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Batch_file">batch</a> file without using the GUI. An example of this batch script can be found in the <a rel="nofollow" class="external text" href="User_Reference%253AP300Classifier.html#Batch_Scripting">Batch Scripting</a> section. The P300 Classifier GUI provides the following functionality to investigators: 
</p>
<dl><dt>Classifier Training</dt>
<dd>Generates feature weights from BCI2000 P3Speller or Stimuli Presentation data files</dd></dl>
<dl><dt>Classifier Testing</dt>
<dd>Applies current feature weights to BCI2000 P3Speller or Stimuli Presentation data files and compares the results</dd></dl>
<h2><span class="mw-headline" id="Location">Location</span></h2>
<p><a rel="nofollow" class="external free" href="http://www.bci2000.org/svn/trunk/src/core/Tools/P300Classifier">http://www.bci2000.org/svn/trunk/src/core/Tools/P300Classifier</a>
</p>
<h2><span class="mw-headline" id="Versioning">Versioning</span></h2>
<h3><span class="mw-headline" id="Author">Author</span></h3>
<p>Cristhian Mauricio Potes
</p>
<h3><span class="mw-headline" id="e-mail">e-mail</span></h3>
<p>cmpotes@miners.utep.edu
</p>
<h3><span class="mw-headline" id="Source_Code_Revisions">Source Code Revisions</span></h3>
<ul><li>Initial development: May 15, 2009</li>
<li>Tested under: Windows XP, Windows Vista</li>
<li>Known to compile under: Visual Studio 2008</li>
<li>Broken since: --</li></ul>
<h2><span class="mw-headline" id="Control_Panel">Control Panel</span></h2>
<p>The P300 Classifier GUI is composed of three panes: Data, Parameters, and Details. 
</p>
<h3><span class="mw-headline" id="Data_Pane">Data Pane</span></h3>
<p>Data Pane allows the user to
</p>
<ul><li>Load training and testing data files and an INI file</li>
<li>Generate and apply feature weights</li>
<li>Write a parameter file fragment (*.prm)</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:562px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:DataPaneLabels.png" class="image"><img alt="" src="../images/c/cf/DataPaneLabels.png" decoding="async" width="560" height="738" class="thumbimage" /></a>  <div class="thumbcaption">Data pane</div></div></div></div>
<p><br />
</p>
<ul><li><font color="red"> [1] </font> <b>Load Training Data Files:</b> Use this button to load <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki">BCI2000</a> data files for classifier training. The information for the selected files will appear at the top of the button.</li></ul>
<ul><li><font color="red"> [2] </font> <b>Load Testing Data Files:</b> Use this button to load <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki">BCI2000</a> data files for classifier testing. The information for the selected files will appear at the top of the button. Training and testing data files must be compatible.</li></ul>
<ul><li><font color="red"> [3] </font> <b>Load Ini File:</b> Use this button to load an <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/INI_file">INI file</a> with all the parameters needed for the classifier.</li></ul>
<pre>[Initialization]

maxiter = 60 // to set Max Model Features
penter = 0.1000 // to set Penter
premove = 0.1500 // to set Premove
spatial_filter = 1 // to set Spatial Filter. Set 1 for RAW and 2 for CAR
decimation_frequency_Hz = 20 // to set Decimation Frequency
channel_set = 1 2 3 4 5 6 7 8 // to set Channel Set
Resp_window_ms = 0 800 // to set Response Window. The response window must be in milliseconds (ms) 
</pre>
<ul><li><font color="red"> [4] </font> <b>Generate Feature Weights:</b> Use this button to generate the feature weights after properly configuring all of the parameters in the  <a href="User_Reference%253AP300_classifier.html#Parameters" class="mw-redirect" title="User Reference:P300 classifier">Parameters</a> pane. This button will be enable only if the parameters are properly configured and there exists training data files. Once it has been generated feature weights properly, a suggested name for the parameter file fragment (*.prm) will show up at the top of the <a href="User_Reference%253AP300_classifier.html#Write_.2A.prm_File" class="mw-redirect" title="User Reference:P300 classifier">Write *.prm File</a> button.</li></ul>
<ul><li><font color="red"> [5] </font> <b>Apply Feature Weights:</b> Use this button to test the classification accuracy of the feature weights currently stored in the GUI. The classification results will appear in the <a href="User_Reference%253AP300_classifier.html#Details_Pane" class="mw-redirect" title="User Reference:P300 classifier">Details</a> pane.</li></ul>
<ul><li><font color="red"> [6] </font> <b>Write *.prm File:</b> Use this button to save the parameter file fragment with the name suggested at the top of this button. The *.prm file is a <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki">BCI2000</a> parameter file fragment that can be imported into <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki">BCI2000</a> for online testing of the feature weights.</li></ul>
<h3><span class="mw-headline" id="Parameters_Pane">Parameters Pane</span></h3>
<p>Parameters Pane contains all the parameters needed to generate feature weights by using the SWLDA algorithm. These parameters can be loaded using the <a href="User_Reference%253AP300_classifier.html#Load_Ini_File" class="mw-redirect" title="User Reference:P300 classifier">Data Pane</a> button. If the parameters are properly configured the <a href="User_Reference%253AP300_classifier.html#Data_Pane" class="mw-redirect" title="User Reference:P300 classifier">Generate Feature Weights</a> button is enabled.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:564px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:ParametersPaneLabel.png" class="image"><img alt="" src="../images/1/1d/ParametersPaneLabel.png" decoding="async" width="562" height="737" class="thumbimage" /></a>  <div class="thumbcaption">Parameters pane</div></div></div></div>
<ul><li><font color="red"> [7] </font> <b>Max Model Features:</b> Used to specify the maximum number of features to be kept in the SWLDA algorithm. Only a single value can be entered for evaluation. The default value is 60.</li></ul>
<ul><li><font color="red"> [8] </font> <b>Penter:</b> Used to specify the maximum <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/P-value">p-value</a> for  a variable to be entered. The default value is 0.1000. Penter must be less than Premove and 0&lt;Penter&lt;1. Only a single value can be entered for evaluation.</li></ul>
<ul><li><font color="red"> [9] </font> <b>Premove:</b> Used to specify the maximum  <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/P-value">p-value</a> for a variable to be removed. The default value is 0.1500. Premove must be greater than Penter and 0&lt;Premove&lt;1. Only a single value can be entered for evaluation.</li></ul>
<ul><li><font color="red"> [10] </font> <b>Spatial Filter:</b> Selects the spatial filter applied to the training data. Select <b>RAW</b> or <b>CAR</b> from the drop-down menu. <b>RAW</b> is no spatial filter applied to the data, and <b>CAR</b> is a common average reference filter using all of the channels contained in the data file <b>(not just the channels specified in the GUI channel set)</b>. The default spatial filter is <b>RAW</b>.</li></ul>
<ul><li><font color="red"> [11] </font> <b>Decimation Frequency:</b> Used to specify the temporal decimation frequency of the data in Hz. Only a single value can be entered for evaluation. Set this parameter to the <a href="User_Reference%253AP300_classifier.html#Details_Pane" class="mw-redirect" title="User Reference:P300 classifier">Sampling Rate</a> value for no decimation. The lower the Decimation Frequency, the less original data retained for processing. Typically, 20 is a good choice for this parameter.</li></ul>
<ul><li><font color="red"> [12] </font> <b>Channel Set:</b> Used to specify the channel set that will be used to create feature weights. The specified channels must be a subset of the channels contained in the training data file.</li></ul>
<ul><li><font color="red"> [13] </font> <b>Response Window:</b> Used to specify the <i>Begin</i> and <i>End</i> time points in milliseconds (ms) following the stimuli collected for the analysis. These two values are automatically converted into samples according to the sampling rate of the data (rounded). Only a single data window can be entered and will be evaluated. <i>Begin</i> must be less than <i>End</i>.</li></ul>
<h3><span class="mw-headline" id="Details_Pane">Details Pane</span></h3>
<p>Details Pane displays information about the <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki">BCI2000</a> training data files and the classification results. 
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:563px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:DetailsPaneLabel.png" class="image"><img alt="" src="../images/f/f9/DetailsPaneLabel.png" decoding="async" width="561" height="736" class="thumbimage" /></a>  <div class="thumbcaption">Details pane</div></div></div></div>
<ul><li><font color="red"> [14] </font> <b>Sampling Rate:</b> Displays the sampling rate in (Hz) contained in the training data files.</li></ul>
<ul><li><font color="red"> [15] </font> <b>Number of Channels:</b> Displays the total number of channels contained in the training data files.</li></ul>
<ul><li><font color="red"> [16] </font> <b>Classifier:</b> Displays the classifier applied to generate the feature weights. The P300Classifier GUI only uses the SWLDA classifier algorithm.</li></ul>
<ul><li><font color="red"> [17] </font> <b>Application:</b> Displays the type of application used for the investigator. The application can be either <i>P3SpellerTask</i> or <i>StimulusPresentationTask</i>.</li></ul>
<ul><li><font color="red"> [18] </font> <b>Interpret Mode:</b> Displays the interpret mode used for the investigator. The mode can be either <i>Copy Mode</i> or <i>Online Free Mode</i>.</li></ul>
<ul><li><font color="red"> [19] </font> <b>Duration:</b> Displays the duration in seconds (s) of the whole training data files.</li></ul>
<ul><li><font color="red"> [20] </font> The text editor displays the classification results for the training and testing data files.</li></ul>
<h3><span class="mw-headline" id="Batch_Scripting">Batch Scripting</span></h3>
<p>The P300 Classifier Tool can be scripted in a batch file using the example format below:
</p>
<pre>C:\BCI2000.x64\tools\P300Classifier\P300Classifier.exe -TrainingDataFiles C:\BCI2000.x64\data\ClassifierTest001\ClassifierTestS001R01.dat -inicfg C:\BCI2000.x64\tools\P300Classifier\parameters.ini -ClassifierOutputFile C:\BCI2000.x64\data\ClassifierTest001\P3Classifier_ChS1_RAW_SW.prm
</pre>
<h2><span class="mw-headline" id="Methodology">Methodology</span></h2>
<h3><span class="mw-headline" id="Methodology_Concept">Methodology Concept</span></h3>
<p>The idea behind the P300Classifier is to train and test a linear classifier (SWLDA) for detection of evoked potentials collected from brain signals. This is achieved in the following steps:
</p>
<ul><li>Training Data Files</li></ul>
<ol><li>Load BCI2000 data files</li>
<li>Get P300 responses</li>
<li>Generate feature weights for a linear model using SWLDA</li>
<li>Apply linear classifier to get scores</li>
<li>Interpret scores according to the given application</li></ol>
<ul><li>Testing Data Files</li></ul>
<ol><li>Load BCI2000 data files</li>
<li>Get P300 responses</li>
<li>Apply linear classifier to get scores</li>
<li>Interpret scores according to the given application</li></ol>
<h3><span class="mw-headline" id="Methodology_Step_By_Step">Methodology Step By Step</span></h3>
<h4><span class="mw-headline" id="Step_1:_Load_BCI2000_Data_Files">Step 1: <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki/index.php/UserReference:P300ClassifierMethods">Load BCI2000 Data Files</a></span></h4>
<p>The first step to start using the P300Classifier GUI is to load training and testing BCI2000 data files specified by the investigator. The BCI2000 data files are checked for compatibility and consistency. If all training data files are valid then the <i>Generate Feature Weights</i> button is enabled and each file is colored with light green. Otherwise, the <i>Generate Feature Weights</i> button is not enabled, and each file is colored either with yellow or pink. See the following color coded scheme and example.
</p>
<ul><li><span style="background-color:lightgreen"><b>files ok</b></span>&#160;: The files are valid.</li>
<li><span style="background-color:yellow"><b>files mismatch</b></span>&#160;: The files may be valid but there is a mismatch with another file.</li>
<li><span style="background-color:pink"><b>files error</b></span>&#160;: The files are invalid.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial0.png" class="image"><img alt="" src="../images/0/07/Tutorial0.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">Training data file is not valid; the file is highlighted in pink. Testing data file is valid; the file is highlighted in light green. The <i>Generate Feature Weights</i> button is not enabled until the training data file is valid.</div></div></div></div>
<h4><span class="mw-headline" id="Step_2:_Get_P300_Responses">Step 2: <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki/index.php/UserReference:P300ClassifierMethods">Get P300 Responses</a></span></h4>
<p>Signals, states, and parameters are extracted from BCI2000 training and testing data files. However, the signals that are only extracted for analysis are those defined by the user in the <a href="User_Reference%253AP300_classifier.html#Parameters_Pane" class="mw-redirect" title="User Reference:P300 classifier"><b>Response Window</b></a>. Only these signals are filtered and downsampled. The filter employed is a <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Moving_average">Moving Average (MA) Filter</a> implemented as a <i>Direct form II Transposed</i>. The MA filter belongs to the FIR filter and works as a low pass filter removing high frequency components of the signal.
</p>
<h4><span id="Step_3:_Generate_Feature_Weights_for_a_Linear_Model_using_Stepwise_Linear_Discriminant_Analysis_(SWLDA)"></span><span class="mw-headline" id="Step_3:_Generate_Feature_Weights_for_a_Linear_Model_using_Stepwise_Linear_Discriminant_Analysis_.28SWLDA.29">Step 3: <a rel="nofollow" class="external text" href="http://www.bci2000.org/wiki/index.php/UserReference:P300ClassifierMethods">Generate Feature Weights for a Linear Model using Stepwise Linear Discriminant Analysis (SWLDA)</a></span></h4>
<p>The idea behind SWLDA is to obtain a final linear model that approximately fits a set of data (stimulus) by using multiple linear regressions and iterative statistical procedures, thus selecting only significant variables that are included in the final regression.
</p><p>The SWLDA algorithm can be summarized in the following steps:
</p>
<ul><li>STEP 1: Compute the autocorrelation matrix to select the variable most highly correlated to the observations. The selected variable is included in the linear model.</li></ul>
<ul><li>STEP 2: Fit an initial model by performing a linear regression equation with the included variable using least squares.</li></ul>
<ul><li>STEP 3: Check if the variable added is that one which makes greatest improvements in "goodness of fit." That is, remove the added variable if its variance contribution in the regression is insignificant at a specified F level (F-test). If the added variable is removed go to Step 5, else go to Step 4.</li></ul>
<ul><li>STEP 4: Add the variable to the model if there is a significant variance reduction at a specified F-level.</li></ul>
<ul><li>STEP 5: Remove the added variable from the correlation matrix. Go to step 1.</li></ul>
<p>The method terminates when no single step improves the model.
</p>
<h4><span class="mw-headline" id="Step_4:_Apply_Linear_Classifier_to_Get_Scores">Step 4: Apply Linear Classifier to Get Scores</span></h4>
<p>Scores are computed based on the variables included in the final linear model and the corresponding feature weights.
</p>
<h4><span class="mw-headline" id="Step_5:_Interpret_Scores">Step 5: Interpret Scores</span></h4>
<p>Scores are interpreted according to the given application, which can be either P300SpellerTask or StimulusPresentationTask.
</p>
<h2><span class="mw-headline" id="Tutorial">Tutorial</span></h2>
<h3><span class="mw-headline" id="Training_the_SWLDA_Classifier">Training the SWLDA Classifier</span></h3>
<p>The <i>Parameters</i> pane contains all of the parameters for generating feature weights from BCI2000 data files.
</p><p>The investigator must follow the next steps to generate feature weights: 
</p>
<ul><li>Press the <i>Load Training Data Files</i> <font color="red"> [1] </font> button in the <i>Data</i> pane.</li></ul>
<ul><li>From the dialog box, select the desire BCI2000 *.dat file(s) for training. Selected files can be from different sessions of the same paradigm but must contain consistent parameters. Each training data file is colored according to the color coded scheme explained in <a href="User_Reference%253AP300_classifier.html#Step_1:_Load_BCI2000_data_files" class="mw-redirect" title="User Reference:P300 classifier">Load BCI2000 data files</a>. Files can only be selected from a single directory; the desired training data files should be organized into the same directory prior to using the P300Classifier GUI.</li></ul>
<ul><li>Once the <i>Parameters</i> pane is correctly set as desired, the <i>Generate Feature Weights</i> button is enable. Press this button to perform the analysis and generate feature weights. The <i>Overall Progress</i> bar displayed in <i>Data</i> and <i>Details</i> panes will indicate the progress of the SWLDA. The classification results will appear in the text editor <font color="red"> [20] </font> of <i>Details</i> pane. Every time it is pressed the <i>Generate Feature Weights</i> button, and the analysis is successfully completed, there is generated a new feature weights set.</li></ul>
<ul><li>The training procedure can be repeated multiple times generating a new feature weights set that depends on the configured parameters.</li></ul>
<ul><li>After training is completed and feature weights are generated, it is recommended to test (cross validate) the feature weights on independent data (testing data files) before saving the parameter file fragment (*.prm). Additionally, there is a suggested parameter file fragment name displayed on the top of <i>Write *.prm File</i> button, which can be used to save the *.prm file either with the suggested name or the name specified by the investigator.</li></ul>
<h3><span class="mw-headline" id="Testing_the_SWLDA_Classifier">Testing the SWLDA Classifier</span></h3>
<p>The <i>Data</i> pane contains the <i>Apply Feature Weights</i> <font color="red"> [5] </font> button for testing the generated feature weights to one or more BCI2000 testing data files.
</p><p>The investigator must follow the next steps for applying feature weights to testing data files:
</p>
<ul><li>Once it has been successfully generated feature weights and there exists testing data files, the <i>Apply Feature Weights</i> button is enabled. If there are no testing data files loaded, the investigator must press this button to load testing data file(s). One or more BCI2000 *.dat files can be selected from the same directory as a single 'test file group' each time the button is pressed. Selected files can be from different sessions of the same paradigm but must contain consistent parameters. Each testing data file is colored according to the color coded scheme explained in <a href="User_Reference%253AP300_classifier.html#Step_1:_Load_BCI2000_data_files" class="mw-redirect" title="User Reference:P300 classifier">Load BCI2000 data files</a>. All testing files selected should have the same sampling rate and electrode montage as the training data files selected to generate the current feature weights set.</li></ul>
<ul><li>After all the testing data files are correctly selected, press the <i>Apply Feature Weights</i> <font color="red"> [5] </font> button to perform the analysis. Results of the classification are displayed in the text editor <font color="red"> [20] </font>  of <i>Details</i> pane. The <i>Overall Progress</i> bar displayed in <i>Data</i> and <i>Details</i> panes will indicate the progress of the classification.</li></ul>
<ul><li>After evaluating the classification results, the *.prm file from the current session can be saved by pressing the <i>Write *.prm File</i> button.</li></ul>
<h3><span class="mw-headline" id="Example">Example</span></h3>
<p>In the next example, it is desired to compute feature weights from the following BCI2000 training data file <b>eeg3_1.dat</b>.
</p><p>By pressing the <i>Load Training Data Files</i> button the file <b>eeg3_1.dat</b> is uploaded as shown in the next figure. Notice that the training data file is set up correctly since it is colored in light green. Remember that the classifier algorithm will be trained by using this training data file. 
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial1.png" class="image"><img alt="" src="../images/6/61/Tutorial1.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">By pressing the <i>Load Training Data Files</i> button it is uploaded the desired BCI2000 training data file. The classifier algorithm is trained by using this training data file.</div></div></div></div>
<p>The parameters shown in <i>Parameters Pane</i> are set by default. For illustration purposes, however, it is desired to load initial parameters from an INI file called parameters.ini by pressing the <i>Load Ini File</i> button. 
</p>
<pre>[Initialization]
maxiter = 60 
penter = 0.1000 
premove = 0.1500 
spatial_filter = 2 
decimation_frequency_Hz = 20 
channel_set = 1 2 3 4 5 6 7 8 
Resp_window_ms = 0 800 
</pre>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial2.png" class="image"><img alt="" src="../images/3/30/Tutorial2.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">By pressing the <i>Load Ini File</i> button it is uploaded the desired initial parameters that the classifier algorithm will use to generate the corresponding feature weights.</div></div></div></div>
<p>Once the initial parameters are loaded and properly set up, the <i>Generate Feature Weights</i> button is enabled, and each one of the parameter fields is colored in light green as shown in the next figure.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial3.png" class="image"><img alt="" src="../images/4/4f/Tutorial3.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">All of the parameter fields are properly set up. Thus, each parameter field is colored in light green.</div></div></div></div>
<p>The investigator can change any of the parameters fields at any time. However, if that change is not properly set up (i.e., the given parameter is invalid), the corresponding parameter field will be colored in pink.
</p>
<ul><li><span style="background-color:lightgreen"><b>parameter field ok</b></span>&#160;: The parameter is valid.</li>
<li><span style="background-color:pink"><b>parameter field error</b></span>&#160;: The parameter is invalid.</li></ul>
<p>In the next figure, the investigator changes the <i>Channel Set</i> field introducing one more channel, channel 9. Since this channel is not a subset of the channels contained in the training data file, the corresponding field is colored in pink, and a tool tip is popped up displaying the error message. Additionally, the <i>Generate Feature Weights</i> button is not enabled until that specific field is properly configured.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial4.png" class="image"><img alt="" src="../images/d/db/Tutorial4.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">The <i>Channel Set</i> field is modified by introducing one more channel, channel 9. This field is colored in pink since channel 9 is not a subset of the channels contained in the training data file.</div></div></div></div>
<p>Once the parameters are properly configured, the investigator is ready to generate feature weights by pressing the <i>Generate Feature Weights</i> button. Details of the training data file and progress of the classification are displayed in the <i>Details Pane</i> as shown below.   
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial5.png" class="image"><img alt="" src="../images/3/38/Tutorial5.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">Details of the training data file and progress of the classification. There is an overall progress bar in both the <i>Data Pane</i> and <i>Details Pane</i>.</div></div></div></div>
<p>Once the classifier has been trained with the BCI2000 training data file, and it has generated the corresponding feature weights, it is desired to test these feature weights with the following BCI2000 testing data file <b>eeg3_2.dat</b>.
</p><p>By pressing the <i>Load Testing Data Files</i> button this file is uploaded as shown in the next figure. Notice that the testing data file is set up correctly since it is colored in light green. If the testing data file is valid then the <i>Apply Feature Weights</i> button is enabled.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial6.png" class="image"><img alt="" src="../images/c/c3/Tutorial6.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">By pressing the <i>Load Testing Data Files</i> button it is uploaded the desired BCI2000 testing data file. The file is colored in light green if valid.</div></div></div></div>
<p>The investigator is ready to apply feature weights by pressing the <i>Apply Feature Weights</i> button. Details of the training data file (no testing data file) and progress of the classification are displayed in the <i>Details Pane</i> as shown below.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial7.png" class="image"><img alt="" src="../images/a/a2/Tutorial7.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">Details of the training data file and progress of the classification. Testing feature weights generated from the training data file <b>eeg3_2.dat</b>. There is an overall progress bar in both the <i>Data Pane</i> and <i>Details Pane</i>.</div></div></div></div>
<p>If satisfied with the classification obtained from the current feature weights, the investigator can write a parameter file fragment *.prm with the name suggested in the <i>Write *.prm File</i> field by pressing the <i>Write *.prm File</i> button. The *.prm file is a BCI2000 parameter file fragment that can be imported into BCI2000 for online testing of the feature weights. In the following image, it is written a *.prm file called <b>MUDChS1_RAW_SW.prm</b>.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:566px;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Tutorial8.png" class="image"><img alt="" src="../images/0/04/Tutorial8.png" decoding="async" width="564" height="739" class="thumbimage" /></a>  <div class="thumbcaption">Write a parameter file fragment *.prm. The *.prm file is a BCI2000 parameter file fragment that can be imported into BCI2000 for online testing of the feature weights.</div></div></div></div>
<p>Every time the investigator changes any of the parameters in the <i>Parameters Pane</i>, the <i>Apply Feature Weights</i> button is disabled. To enable it, the investigator must generate feature weights again.
</p>
<h2><span class="mw-headline" id="Future_work">Future work</span></h2>
<ul><li>Present classification results as topographies and graphs as the Matlab-based P300 GUI</li></ul>
<ul><li>Let the P300Classifier GUI work with frequency-based features</li></ul>
<ul><li>Speed up the P300Classifier GUI by using multithreading when solving the Least Squares (QR factorization)</li></ul>
<h2><span class="mw-headline" id="References">References</span></h2>
<ul><li>N. R. Draper, H. Smith. <i>Applied Regression Analysis</i>. John Wiley &amp; Sons, Inc, New York, 1966.</li></ul>
<ul><li>P. M. Embree, B. Kimble. <i>C Language Algorithms for Digital Signal Processing</i>. Prentice Hall, Englewood Cliffs, New Jersey, 1991.</li></ul>
<ul><li>A. Ralston, H. S. Wilf. <i>Mathematical Methods for Digital Computers</i>. John Wiley &amp; Sons, Inc, New York, 1962.</li></ul>
<ul><li>W. H. Press, S. A. Teukolsky, W. T. Vetterling, B. P. Flannery. <i>Numerical Recipes in C</i>. Cambridge University Press, New York, 1988.</li></ul>
<!-- 
NewPP limit report
Cached time: 20220610001809
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.060 seconds
Real time usage: 0.066 seconds
Preprocessor visited node count: 143/1000000
Post‐expand include size: 15/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 906/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:1938-0!canonical and timestamp 20220610001809 and revision id 9498
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=User_Reference:P300Classifier&amp;oldid=9498">http://www.bci2000.org/mediawiki/index.php?title=User_Reference:P300Classifier&amp;oldid=9498</a>"</div>
 </div>
</body>
</html>