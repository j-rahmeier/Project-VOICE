<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>User Reference:Matlab MEX Files - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:black; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:blue; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul><li class="toc1"><a href="User_Reference%253AOperator_Module.html">Operator Module</a></li><li class="toc1"><a href="User_Reference%253AOperator_Module_Scripting.html">Operator Scripting</a></li><li class="toc1"><a href="User_Reference%253AModule_Command_Line_Options.html">Module Command Line Options</a></li><li class="toc1"><a href="User_Reference%253AData_File_Formats.html">Data File Formats</a></li><li class="toc1"><a href="User_Reference%253AFilters.html">Configuration Guide</a></li><li class="toc1"><a href="User_FAQ.html">FAQ</a></li><li class="toc1">Applications</li><ul><li class="toc2"><a href="User_Reference%253ACursorTask.html">Cursor Task</a></li><li class="toc2"><a href="https://www.bci2000.org/mediawiki/index.php/User_Reference:P3SpellerTask">P3Speller Task</a></li><li class="toc2"><a href="https://www.bci2000.org/mediawiki/index.php/User_Reference:StimulusPresentation">Stimulus Presentation</a></li></ul><li class="toc1">Tools</li><ul><li class="toc2"><a href="User_Reference%253ABCI2000Certification.html">BCI2000Certification</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Launcher.html">BCI2000Launcher</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Viewer.html">BCI2000Viewer</a></li><li class="toc2"><a href="User_Reference%253ABCI2000FileInfo.html">BCI2000FileInfo</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Export.html">BCI2000Export</a></li><li class="toc2"><a href="User_Reference%253ABCI2000Analysis.html">BCI2000Analysis</a></li><li class="toc2"><a href="User_Reference%253ABCI2000_Offline_Analysis.html">BCI2000 Offline Analysis</a></li><li class="toc2"><a href="User_Reference%253AEloc_Helper.html">Eloc Helper</a></li><li class="toc2"><a href="User_Reference%253AEEGLabImport.html">EEGLabImport</a></li><li class="toc2"><a href="User_Reference%253AMatlab_Tools.html">Matlab Tools</a></li><li class="toc2">Matlab MEX Files</li><li class="toc2"><a href="User_Reference%253ACommand_Line_Processing.html">Command Line Processing</a></li></ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">Matlab MEX Files</h1>
 <p class = "subtitle">User Reference</p>
 <hr class = "sep" />
 <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="User_Reference%253AMatlab_MEX_Files.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="User_Reference%253AMatlab_MEX_Files.html#Downloading_BCI2000_MEX_files"><span class="tocnumber">2</span> <span class="toctext">Downloading BCI2000 MEX files</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="User_Reference%253AMatlab_MEX_Files.html#Using_BCI2000_MEX_files"><span class="tocnumber">3</span> <span class="toctext">Using BCI2000 MEX files</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="User_Reference%253AMatlab_MEX_Files.html#Building_BCI2000_MEX_files"><span class="tocnumber">4</span> <span class="toctext">Building BCI2000 MEX files</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="User_Reference%253AMatlab_MEX_Files.html#BCI2000_MEX_functions"><span class="tocnumber">5</span> <span class="toctext">BCI2000 MEX functions</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="User_Reference%253AMatlab_MEX_Files.html#load_bcidat"><span class="tocnumber">5.1</span> <span class="toctext">load_bcidat</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="User_Reference%253AMatlab_MEX_Files.html#save_bcidat"><span class="tocnumber">5.2</span> <span class="toctext">save_bcidat</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="User_Reference%253AMatlab_MEX_Files.html#convert_bciprm"><span class="tocnumber">5.3</span> <span class="toctext">convert_bciprm</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="User_Reference%253AMatlab_MEX_Files.html#mem"><span class="tocnumber">5.4</span> <span class="toctext">mem</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="User_Reference%253AMatlab_MEX_Files.html#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>MEX files allow the execution of externally compiled code from within Matlab. Because Matlab code is interpreted at runtime, and MEX files contain binary code that has been compiled prior to use, MEX files are generally faster than equivalent Matlab code.
</p><p>BCI2000 MEX files contain code that interfaces with BCI2000-specific data structures, i.e. BCI2000 data files, and parameter definitions. This allows access to BCI2000 data from Matlab, without duplicating code that implements those data structures.
</p><p>Higher-level Matlab routines for data-analysis and management, which make use of these mex files,  are documented on the <a href="User_Reference%253AMatlab_Tools.html" title="User Reference:Matlab Tools">Matlab tools</a> page.
</p>
<h2><span class="mw-headline" id="Downloading_BCI2000_MEX_files">Downloading BCI2000 MEX files</span></h2>
<p>Download the <a rel="nofollow" class="external text" href="https://bci2000.org/downloads/mex.zip">BCI2000 MEX files here</a>.
</p>
<h2><span class="mw-headline" id="Using_BCI2000_MEX_files">Using BCI2000 MEX files</span></h2>
<p>BCI2000 comes with pre-built MEX files for a number of platforms, including 32- and 64-bit Windows, Mac OS X, and Linux for the amd64 architecture. 
Add <tt>BCI2000/tools/mex</tt> to your Matlab path to use these files.
</p>
<h2><span class="mw-headline" id="Building_BCI2000_MEX_files">Building BCI2000 MEX files</span></h2>
<p>Typically, you will use pre-built binary versions of BCI2000 MEX files as described above. If you need to build BCI2000 MEX files yourself, follow the <a href="Programming_Howto%253ABuilding_and_Customizing_BCI2000.html" title="Programming Howto:Building and Customizing BCI2000">tutorial on building BCI2000 from source</a>, and make sure to check the <tt>BUILD_MEX_FILES</tt> option in the CMake configuration step.
</p>
<h2><span class="mw-headline" id="BCI2000_MEX_functions">BCI2000 MEX functions</span></h2>
<h3><span class="mw-headline" id="load_bcidat"><tt>load_bcidat</tt></span></h3>
<pre> [ signal, states, parameters, total_samples, file_samples ] ...
    = load_bcidat( 'filename1', 'filename2', ... )
</pre>
<p>loads signal, state, and parameter data from the files whose names are given
as function arguments.
</p><p>Examples for loading multiple files:
</p>
<pre>files = dir( '*.dat' );
[ signal, states, parameters ] = load_bcidat( files.name );

files = struct( 'name', uigetfile( 'MultiSelect', 'on' ) );
[ signal, states, parameters ] = load_bcidat( files.name );
</pre>
<p>For multiple files, number of channels, states, and signal type must be
consistent.
</p><p>By default, signal data will be in raw A/D units, and will be represented by the 
smallest Matlab data type that accommodates them.
To obtain signal data calibrated into physical units (microvolts),
specify '-calibrated' as an option anywhere in the argument list.
</p><p>The 'states' output variable will be a Matlab struct with BCI2000 state
names as struct member names, and the number of state value entries matching
the first dimension of the 'signal' output variable.
</p><p>The 'parameters' output variable will be a Matlab struct with BCI2000
parameter names as struct member names.
Individual parameter values are represented as cell arrays of strings in a 
'Value' struct member, and additionally as numeric matrices in a 'NumericValue'
struct member. When there is no numeric interpretation possible, the 
corresponding matrix entry will be NaN. For nested matrices, no NumericValue
field is provided.
When multiple files are given, parameter values will match the ones contained 
in the first file.
</p><p>Optionally, sample ranges may be specified for individual files:
</p>
<pre>[ signal, states, parameters ] = load_bcidat( 'filename', [first last] )
</pre>
<p>will load a subset of samples defined by first and last sample index.
Specifying [0 0] for an empty sample range allows to read states and 
parameters from a file without reading sample data:
</p>
<pre>[ ignored, states, parameters ] = load_bcidat( 'filename', [0 0] );
</pre>
<p>The 'total_samples' output variable reports the total number of samples
present in all files, independently of how many samples have been
specified as sample ranges. This allows to retrieve the number of
samples in a file without actually loading the file:
</p>
<pre>[ ignored, states, parameters, total_samples ] = load_bcidat( 'filename', [0 0] );
</pre>
<p>Similarly, the 'file_samples' output variable provides a vector
containing the number of samples within each input file, regardless of
any sample ranges that may have been specified.
</p>
<pre>[ ignored, states, parameters, total_samples, file_samples ] = load_bcidat( 'filename1', [0 0], 'filename2', [0 0]  );
</pre>
<h3><span class="mw-headline" id="save_bcidat"><tt>save_bcidat</tt></span></h3>
<pre>save_bcidat( 'filename', signal, states, parameters );
</pre>
<p>saves signal, state, and parameter data into the named file.
</p><p>The signal, state, and parameter arguments must be Matlab structs as 
created by the <tt>load_bcidat</tt>, or <tt>convert_bciprm</tt> mex
files.
Signal data is always interpreted as raw data, i.e. it will be written
into the output file unchanged.
</p><p>The output file format is deduced from the output file's extension, 
which may be <i>.dat</i>, <i>.edf</i>, or <i>.gdf</i>. When no extension is recognized, 
the BCI2000 <i>dat</i> file format is used.
</p><p>For an example how to use <tt>save_bcidat</tt> in conjunction with <tt>load_bcidat</tt>,
see the <a href="Contributions%253AFilterGUI.html" title="Contributions:FilterGUI">FilterGUI</a> tool contribution.
</p>
<h3><span class="mw-headline" id="convert_bciprm"><tt>convert_bciprm</tt></span></h3>
<p>A Matlab (mex) subroutine that converts BCI2000 parameters
from Matlab struct into string representation and back.
</p>
<pre>parameter_lines = convert_bciprm( parameter_struct );
</pre>
<p>converts a BCI2000 parameter struct (as created by load_bcidat)
into a cell array of strings containing valid BCI2000 parameter
definition strings.
</p><p>When the input is a cell array rather than a Matlab struct, convert_bciprm
will interpret the input as a list of BCI2000 parameter definition strings (ignoring the NumericValue field if present).
</p>
<pre>parameter_struct = convert_bciprm( parameter_lines );
</pre>
<h3><span class="mw-headline" id="mem"><tt>mem</tt></span></h3>
<p>This command estimates a power spectrum, using the AR based spectral estimator
that is also present in the <a href="User_Reference%253AARFilter.html" class="mw-redirect" title="User Reference:ARFilter">ARFilter</a>.
The calling syntax is:
</p>
<pre>[spectrum, frequencies] = mem(signal, parms);
</pre>
<p>with &lt;signal&gt; and &lt;spectrum&gt; having dimensions values x channels, and
with &lt;parms&gt; being a vector of parameter values:
</p>
<ul><li>model order,</li>
<li>first bin center,</li>
<li>last bin center,</li>
<li>bin width,</li>
<li>evaluations per bin,</li>
<li>detrend option (optional, 0: none, 1: mean, 2: linear; defaults to none),</li>
<li>sampling frequency (optional, defaults to 1).</li></ul>
<p>For a detailed description of configuration parameters, see the <a href="User_Reference%253AARFilter.html" class="mw-redirect" title="User Reference:ARFilter">User Reference:ARFilter</a> page.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="User_Reference%253AData_File_Formats.html" title="User Reference:Data File Formats">User Reference:Data File Formats</a>, <a href="User_Reference%253AARFilter.html" class="mw-redirect" title="User Reference:ARFilter">User Reference:ARFilter</a>
</p>
<!-- 
NewPP limit report
Cached time: 20230524175625
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.013 seconds
Real time usage: 0.024 seconds
Preprocessor visited node count: 34/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:1593-0!canonical and timestamp 20230524175625 and revision id 9440
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=User_Reference:Matlab_MEX_Files&amp;oldid=9440">http://www.bci2000.org/mediawiki/index.php?title=User_Reference:Matlab_MEX_Files&amp;oldid=9440</a>"</div>
 </div>
</body>
</html>